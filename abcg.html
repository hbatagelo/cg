<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1.5 ABCg | MCTA008-17 Computa√ß√£o Gr√°fica</title>
  <meta name="description" content="Notas de aula de MCTA008-17 Computa√ß√£o Gr√°fica da Universidade Federal do ABC" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="1.5 ABCg | MCTA008-17 Computa√ß√£o Gr√°fica" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Notas de aula de MCTA008-17 Computa√ß√£o Gr√°fica da Universidade Federal do ABC" />
  <meta name="github-repo" content="hbatagelo/cgbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1.5 ABCg | MCTA008-17 Computa√ß√£o Gr√°fica" />
  
  <meta name="twitter:description" content="Notas de aula de MCTA008-17 Computa√ß√£o Gr√°fica da Universidade Federal do ABC" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="vscode.html"/>
<link rel="next" href="intro.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { font-weight: bold; } /* Alert */
code span.an { font-style: italic; } /* Annotation */
code span.cf { font-weight: bold; } /* ControlFlow */
code span.co { font-style: italic; } /* Comment */
code span.cv { font-style: italic; } /* CommentVar */
code span.do { font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.er { font-weight: bold; } /* Error */
code span.in { font-style: italic; } /* Information */
code span.kw { font-weight: bold; } /* Keyword */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.wa { font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Computa√ß√£o Gr√°fica</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Apresenta√ß√£o</a>
<ul>
<li class="chapter" data-level="" data-path="pr√©-requisitos.html"><a href="pr√©-requisitos.html"><i class="fa fa-check"></i>Pr√©-requisitos</a>
<ul>
<li class="chapter" data-level="" data-path="pr√©-requisitos.html"><a href="pr√©-requisitos.html#atividades-pr√°ticas"><i class="fa fa-check"></i>Atividades pr√°ticas</a></li>
<li class="chapter" data-level="" data-path="pr√©-requisitos.html"><a href="pr√©-requisitos.html#visualizando-este-site"><i class="fa fa-check"></i>Visualizando este site</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="config.html"><a href="config.html"><i class="fa fa-check"></i><b>1</b> Configura√ß√£o do ambiente</a>
<ul>
<li class="chapter" data-level="1.1" data-path="linux.html"><a href="linux.html"><i class="fa fa-check"></i><b>1.1</b> Linux</a>
<ul>
<li class="chapter" data-level="" data-path="linux.html"><a href="linux.html#verificando-o-opengl"><i class="fa fa-check"></i>Verificando o OpenGL</a></li>
<li class="chapter" data-level="" data-path="linux.html"><a href="linux.html#atualizando-o-gcc"><i class="fa fa-check"></i>Atualizando o GCC</a></li>
<li class="chapter" data-level="" data-path="linux.html"><a href="linux.html#instalando-o-emscripten"><i class="fa fa-check"></i>Instalando o Emscripten</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="macos.html"><a href="macos.html"><i class="fa fa-check"></i><b>1.2</b> macOS</a>
<ul>
<li class="chapter" data-level="" data-path="macos.html"><a href="macos.html#instalando-o-emscripten-1"><i class="fa fa-check"></i>Instalando o Emscripten</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="windows.html"><a href="windows.html"><i class="fa fa-check"></i><b>1.3</b> Windows</a>
<ul>
<li class="chapter" data-level="" data-path="windows.html"><a href="windows.html#verificando-o-opengl-1"><i class="fa fa-check"></i>Verificando o OpenGL</a></li>
<li class="chapter" data-level="" data-path="windows.html"><a href="windows.html#instalando-o-emscripten-2"><i class="fa fa-check"></i>Instalando o Emscripten</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="vscode.html"><a href="vscode.html"><i class="fa fa-check"></i><b>1.4</b> Visual Studio Code</a></li>
<li class="chapter" data-level="1.5" data-path="abcg.html"><a href="abcg.html"><i class="fa fa-check"></i><b>1.5</b> ABCg</a>
<ul>
<li class="chapter" data-level="" data-path="abcg.html"><a href="abcg.html#instala√ß√£o"><i class="fa fa-check"></i>Instala√ß√£o</a></li>
<li class="chapter" data-level="" data-path="abcg.html"><a href="abcg.html#compilando-na-linha-de-comando"><i class="fa fa-check"></i>Compilando na linha de comando</a></li>
<li class="chapter" data-level="" data-path="abcg.html"><a href="abcg.html#compilando-no-vs-code"><i class="fa fa-check"></i>Compilando no VS Code</a></li>
<li class="chapter" data-level="" data-path="abcg.html"><a href="abcg.html#depurando-no-vs-code"><i class="fa fa-check"></i>Depurando no VS Code</a></li>
<li class="chapter" data-level="" data-path="abcg.html"><a href="abcg.html#compilando-para-wasm"><i class="fa fa-check"></i>Compilando para WASM</a></li>
<li class="chapter" data-level="" data-path="abcg.html"><a href="abcg.html#revis√£o-de-c"><i class="fa fa-check"></i>Revis√£o de C++</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introdu√ß√£o</a>
<ul>
<li class="chapter" data-level="2.1" data-path="√°reas-correlatas.html"><a href="√°reas-correlatas.html"><i class="fa fa-check"></i><b>2.1</b> √Åreas correlatas</a></li>
<li class="chapter" data-level="2.2" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html"><i class="fa fa-check"></i><b>2.2</b> Linha do tempo</a>
<ul>
<li class="chapter" data-level="" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html#section"><i class="fa fa-check"></i>1950</a></li>
<li class="chapter" data-level="" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html#section-1"><i class="fa fa-check"></i>1960</a></li>
<li class="chapter" data-level="" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html#section-2"><i class="fa fa-check"></i>1970</a></li>
<li class="chapter" data-level="" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html#section-3"><i class="fa fa-check"></i>1980</a></li>
<li class="chapter" data-level="" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html#section-4"><i class="fa fa-check"></i>1990</a></li>
<li class="chapter" data-level="" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html#section-5"><i class="fa fa-check"></i>2000</a></li>
<li class="chapter" data-level="" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html#section-6"><i class="fa fa-check"></i>2010</a></li>
<li class="chapter" data-level="" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html#section-7"><i class="fa fa-check"></i>2020</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="firstapp.html"><a href="firstapp.html"><i class="fa fa-check"></i><b>2.3</b> Primeiro programa</a>
<ul>
<li class="chapter" data-level="" data-path="firstapp.html"><a href="firstapp.html#configura√ß√£o-inicial"><i class="fa fa-check"></i>Configura√ß√£o inicial</a></li>
<li class="chapter" data-level="" data-path="firstapp.html"><a href="firstapp.html#main.cpp"><i class="fa fa-check"></i>main.cpp</a></li>
<li class="chapter" data-level="" data-path="firstapp.html"><a href="firstapp.html#window.hpp"><i class="fa fa-check"></i>window.hpp</a></li>
<li class="chapter" data-level="" data-path="firstapp.html"><a href="firstapp.html#window.cpp"><i class="fa fa-check"></i>window.cpp</a></li>
<li class="chapter" data-level="" data-path="firstapp.html"><a href="firstapp.html#compilando-para-webassembly"><i class="fa fa-check"></i>Compilando para WebAssembly</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="tictactoe.html"><a href="tictactoe.html"><i class="fa fa-check"></i><b>2.4</b> Jogo da Velha</a>
<ul>
<li class="chapter" data-level="" data-path="tictactoe.html"><a href="tictactoe.html#configura√ß√£o-inicial-1"><i class="fa fa-check"></i>Configura√ß√£o inicial</a></li>
<li class="chapter" data-level="" data-path="tictactoe.html"><a href="tictactoe.html#main.cpp-1"><i class="fa fa-check"></i>main.cpp</a></li>
<li class="chapter" data-level="" data-path="tictactoe.html"><a href="tictactoe.html#window.hpp-1"><i class="fa fa-check"></i>window.hpp</a></li>
<li class="chapter" data-level="" data-path="tictactoe.html"><a href="tictactoe.html#window.cpp-1"><i class="fa fa-check"></i>window.cpp</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="graphicssystem.html"><a href="graphicssystem.html"><i class="fa fa-check"></i><b>3</b> Sistemas gr√°ficos</a>
<ul>
<li class="chapter" data-level="3.1" data-path="lightcolor.html"><a href="lightcolor.html"><i class="fa fa-check"></i><b>3.1</b> Luz e cor</a>
<ul>
<li class="chapter" data-level="" data-path="lightcolor.html"><a href="lightcolor.html#vis√£o-tricrom√°tica"><i class="fa fa-check"></i>Vis√£o tricrom√°tica</a></li>
<li class="chapter" data-level="" data-path="lightcolor.html"><a href="lightcolor.html#modelos-de-cor"><i class="fa fa-check"></i>Modelos de cor</a></li>
<li class="chapter" data-level="" data-path="lightcolor.html"><a href="lightcolor.html#sistema-cie-1931"><i class="fa fa-check"></i>Sistema CIE 1931</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="vectorxraster.html"><a href="vectorxraster.html"><i class="fa fa-check"></i><b>3.2</b> Vetorial <em>x</em> matricial</a>
<ul>
<li class="chapter" data-level="" data-path="vectorxraster.html"><a href="vectorxraster.html#representa√ß√£o-vetorial"><i class="fa fa-check"></i>Representa√ß√£o vetorial</a></li>
<li class="chapter" data-level="" data-path="vectorxraster.html"><a href="vectorxraster.html#representa√ß√£o-matricial"><i class="fa fa-check"></i>Representa√ß√£o matricial</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="es.html"><a href="es.html"><i class="fa fa-check"></i><b>3.3</b> Dispositivos de E/S</a>
<ul>
<li class="chapter" data-level="" data-path="es.html"><a href="es.html#dispositivos-de-entrada"><i class="fa fa-check"></i>Dispositivos de entrada</a></li>
<li class="chapter" data-level="" data-path="es.html"><a href="es.html#dispositivos-de-sa√≠da"><i class="fa fa-check"></i>Dispositivos de sa√≠da</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="framebuffer.html"><a href="framebuffer.html"><i class="fa fa-check"></i><b>3.4</b> Framebuffer</a>
<ul>
<li class="chapter" data-level="" data-path="framebuffer.html"><a href="framebuffer.html#screen-tearing"><i class="fa fa-check"></i>Screen tearing</a></li>
<li class="chapter" data-level="" data-path="framebuffer.html"><a href="framebuffer.html#vsync"><i class="fa fa-check"></i>Vsync</a></li>
<li class="chapter" data-level="" data-path="framebuffer.html"><a href="framebuffer.html#multiple-buffering"><i class="fa fa-check"></i>Multiple buffering</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="sierpinski.html"><a href="sierpinski.html"><i class="fa fa-check"></i><b>3.5</b> Tri√¢ngulo de Sierpinski</a>
<ul>
<li class="chapter" data-level="" data-path="sierpinski.html"><a href="sierpinski.html#configura√ß√£o-inicial-2"><i class="fa fa-check"></i>Configura√ß√£o inicial</a></li>
<li class="chapter" data-level="" data-path="sierpinski.html"><a href="sierpinski.html#main.cpp-2"><i class="fa fa-check"></i>main.cpp</a></li>
<li class="chapter" data-level="" data-path="sierpinski.html"><a href="sierpinski.html#window.hpp-2"><i class="fa fa-check"></i>window.hpp</a></li>
<li class="chapter" data-level="" data-path="sierpinski.html"><a href="sierpinski.html#window.cpp-2"><i class="fa fa-check"></i>window.cpp</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="pipeline.html"><a href="pipeline.html"><i class="fa fa-check"></i><b>4</b> Pipeline gr√°fico</a>
<ul>
<li class="chapter" data-level="4.1" data-path="dados-gr√°ficos.html"><a href="dados-gr√°ficos.html"><i class="fa fa-check"></i><b>4.1</b> Dados gr√°ficos</a></li>
<li class="chapter" data-level="4.2" data-path="ray-casting-x-rasteriza√ß√£o.html"><a href="ray-casting-x-rasteriza√ß√£o.html"><i class="fa fa-check"></i><b>4.2</b> Ray casting <em>x</em> rasteriza√ß√£o</a>
<ul>
<li class="chapter" data-level="" data-path="ray-casting-x-rasteriza√ß√£o.html"><a href="ray-casting-x-rasteriza√ß√£o.html#ray-casting"><i class="fa fa-check"></i>Ray casting</a></li>
<li class="chapter" data-level="" data-path="ray-casting-x-rasteriza√ß√£o.html"><a href="ray-casting-x-rasteriza√ß√£o.html#rasteriza√ß√£o"><i class="fa fa-check"></i>Rasteriza√ß√£o</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="glpipeline.html"><a href="glpipeline.html"><i class="fa fa-check"></i><b>4.3</b> Pipeline do OpenGL</a>
<ul>
<li class="chapter" data-level="" data-path="glpipeline.html"><a href="glpipeline.html#aplica√ß√£o"><i class="fa fa-check"></i>Aplica√ß√£o</a></li>
<li class="chapter" data-level="" data-path="glpipeline.html"><a href="glpipeline.html#vertex-shader"><i class="fa fa-check"></i>Vertex shader</a></li>
<li class="chapter" data-level="" data-path="glpipeline.html"><a href="glpipeline.html#montagem-de-primitivas"><i class="fa fa-check"></i>Montagem de primitivas</a></li>
<li class="chapter" data-level="" data-path="glpipeline.html"><a href="glpipeline.html#recorte"><i class="fa fa-check"></i>Recorte</a></li>
<li class="chapter" data-level="" data-path="glpipeline.html"><a href="glpipeline.html#rasteriza√ß√£o-1"><i class="fa fa-check"></i>Rasteriza√ß√£o</a></li>
<li class="chapter" data-level="" data-path="glpipeline.html"><a href="glpipeline.html#fragment-shader"><i class="fa fa-check"></i>Fragment shader</a></li>
<li class="chapter" data-level="" data-path="glpipeline.html"><a href="glpipeline.html#opera√ß√µes-de-fragmentos"><i class="fa fa-check"></i>Opera√ß√µes de fragmentos</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="coloredtriangles.html"><a href="coloredtriangles.html"><i class="fa fa-check"></i><b>4.4</b> Tri√¢ngulos coloridos</a>
<ul>
<li class="chapter" data-level="" data-path="coloredtriangles.html"><a href="coloredtriangles.html#configura√ß√£o-inicial-3"><i class="fa fa-check"></i>Configura√ß√£o inicial</a></li>
<li class="chapter" data-level="" data-path="coloredtriangles.html"><a href="coloredtriangles.html#main.cpp-3"><i class="fa fa-check"></i>main.cpp</a></li>
<li class="chapter" data-level="" data-path="coloredtriangles.html"><a href="coloredtriangles.html#window.hpp-3"><i class="fa fa-check"></i>window.hpp</a></li>
<li class="chapter" data-level="" data-path="coloredtriangles.html"><a href="coloredtriangles.html#window.cpp-3"><i class="fa fa-check"></i>window.cpp</a></li>
<li class="chapter" data-level="" data-path="coloredtriangles.html"><a href="coloredtriangles.html#ajustando-a-taxa-de-atualiza√ß√£o"><i class="fa fa-check"></i>Ajustando a taxa de atualiza√ß√£o</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="refer√™ncias.html"><a href="refer√™ncias.html"><i class="fa fa-check"></i>Refer√™ncias</a></li>
<li class="divider"></li>
<li>
<a href="https://github.com/hbatagelo/abcg" target="blank">ABCg no GitHub</a>
<br>
</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">MCTA008-17 Computa√ß√£o Gr√°fica</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="abcg" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> ABCg<a href="abcg.html#abcg" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Para facilitar o desenvolvimento das atividades pr√°ticas utilizaremos a biblioteca <a href="https://github.com/hbatagelo/abcg">ABCg</a> desenvolvida especialmente para esta disciplina.</p>
<p>A ABCg permite a prototipagem r√°pida de aplica√ß√µes gr√°ficas interativas 3D em C++ capazes de rodar tanto no desktop (bin√°rio nativo) quanto no navegador (bin√°rio <a href="https://webassembly.org">WebAssembly</a>).</p>
<p>Internamente a ABCg utiliza a biblioteca <a href="https://www.libsdl.org">SDL</a> para gerenciar o acesso a dispositivos de entrada (mouse/teclado/<em>gamepad</em>) e sa√≠da (v√≠deo e √°udio) de forma independente de plataforma, e a biblioteca <a href="http://glew.sourceforge.net">GLEW</a> para acesso √†s fun√ß√µes da API gr√°fica OpenGL. Al√©m disso, a API do <a href="https://emscripten.org">Emscripten</a> √© utilizada sempre que a aplica√ß√£o √© compilada para gerar bin√°rio WebAssembly.</p>
<p>A ABCg √© mais propriamente um <em>framework</em> do que uma biblioteca, pois ela gerencia o fluxo de trabalho da aplica√ß√£o. Nosso c√≥digo dever√° ser constru√≠do em torno da estrutura fornecida pela ABCg. Do ponto de vista do desenvolvedor, essa estrutura √© apenas uma leve camada de abstra√ß√£o das APIs utilizadas. Por exemplo, √© poss√≠vel acessar diretamente as fun√ß√µes da API gr√°fica OpenGL. De fato, faremos isso na maior parte das vezes. Outras bibliotecas tamb√©m utilizadas e que podem ser acessadas diretamente s√£o:</p>
<ul>
<li><a href="https://github.com/ryanhaining/cppitertools">CPPIterTools</a>: para o suporte a la√ßos <em>range-based</em> em C++ usando fun√ß√µes do tipo <code>range</code>, <code>enumerate</code> e <code>zip</code> similares √†s da linguagem Python;</li>
<li><a href="https://github.com/ocornut/imgui">Dear ImGui</a>: para gerenciamento de <em>widgets</em> de interface gr√°fica do usu√°rio, tais como janelas, bot√µes e caixas de edi√ß√£o;</li>
<li><a href="https://fmt.dev/latest/index.html">{fmt}</a>: como alternativa mais eficiente ao <em>stdio</em> da linguagem C (<code>printf</code>, <code>scanf</code>, etc) e <em>iostreams</em> do C++ (<code>std::cout</code>, <code>std::cin</code>, etc), e para formata√ß√£o de strings com uma sintaxe similar √†s <a href="https://docs.python.org/3/library/stdtypes.html#str.format">f-strings</a> do Python;</li>
<li><a href="https://github.com/microsoft/GSL">Guidelines Support Library</a> (GSL): para uso de fun√ß√µes e tipos de dados recomendados pelo <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines">C++ Core Guidelines</a>;</li>
<li><a href="https://github.com/g-truc/glm">OpenGL Mathematics</a> (GLM): para suporte a opera√ß√µes de transforma√ß√£o geom√©trica com vetores e matrizes;</li>
<li><a href="https://github.com/tinyobjloader/tinyobjloader">tinyobjloader</a>: para a leitura de modelos 3D no formato <a href="https://en.wikipedia.org/wiki/Wavefront_.obj_file">Wavefront OBJ</a>.</li>
</ul>
<p>A seguir veremos como instalar e compilar a ABCg junto com um exemplo de uso.</p>
<div id="instala√ß√£o" class="section level3 unnumbered hasAnchor">
<h3>Instala√ß√£o<a href="abcg.html#instala√ß√£o" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Em um terminal, clone o reposit√≥rio do GitHub:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb58-1"><a href="abcg.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/hbatagelo/abcg.git</span></code></pre></div>
<div class="infobox">
<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1.4em;width:1.4em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#555;overflow:visible;position:relative;"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></svg>
<div class="infoboxtitle">
Observa√ß√£o
</div>
<p>A <em>release</em> mais recente da ABCg tamb√©m pode ser baixada como um arquivo compactado de <a href="https://github.com/hbatagelo/abcg/releases/latest">https://github.com/hbatagelo/abcg/releases/latest</a>.</p>
</div>
<div class="warningbox">
<svg aria-hidden="true" role="img" viewBox="0 0 448 512" style="height:1.4em;width:1.22em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#861f1f;overflow:visible;position:relative;"><path d="M323.56 51.2c-20.8 19.3-39.58 39.59-56.22 59.97C240.08 73.62 206.28 35.53 168 0 69.74 91.17 0 209.96 0 281.6 0 408.85 100.29 512 224 512s224-103.15 224-230.4c0-53.27-51.98-163.14-124.44-230.4zm-19.47 340.65C282.43 407.01 255.72 416 226.86 416 154.71 416 96 368.26 96 290.75c0-38.61 24.31-72.63 72.79-130.75 6.93 7.98 98.83 125.34 98.83 125.34l58.63-66.88c4.14 6.85 7.91 13.55 11.27 19.97 27.35 52.19 15.81 118.97-33.43 153.42z"/></svg>
<div class="warningboxtitle">
Aten√ß√£o
</div>
<p>No Windows, certifique-se de clonar/descompactar o reposit√≥rio em um diret√≥rio cujo nome n√£o contenha espa√ßos ou caracteres especiais. Por exemplo, clone/descompacte em <code>C:\cg</code> em vez de <code>C:\computa√ß√£o gr√°fica</code>.</p>
</div>
<p>O reposit√≥rio tem a estrutura mostrada a seguir. Para simplificar, os arquivos e subdiret√≥rios <code>.git*</code> foram omitidos:</p>
<pre><code>abcg
‚îÇ   .clang-format
‚îÇ   .clang-tidy
‚îÇ   build.bat
‚îÇ   build.sh
|   build-vs.bat
‚îÇ   build-wasm.bat
‚îÇ   build-wasm.sh
|   CHANGELOG.md
‚îÇ   CMakeLists.txt
|   DockerFile
‚îÇ   LICENSE
‚îÇ   README.md
‚îÇ   runweb.bat
‚îÇ   runweb.sh
‚îÇ
‚îî‚îÄ‚îÄ‚îÄabcg
‚îÇ   ‚îÇ   ...
‚îÇ
‚îî‚îÄ‚îÄ‚îÄcmake
‚îÇ   ‚îÇ   ...
‚îÇ   
‚îî‚îÄ‚îÄ‚îÄexamples
‚îÇ   ‚îÇ   ...
‚îÇ
‚îî‚îÄ‚îÄ‚îÄpublic
    ‚îÇ   ...</code></pre>
<p>Os arquivos <code>.clang-format</code> e <code>.clang-tidy</code> s√£o arquivos de configura√ß√£o utilizados pelas ferramentas <a href="https://clang.llvm.org/docs/ClangFormat.html">ClangFormat</a> e <a href="https://clang.llvm.org/extra/clang-tidy/">Clang-Tidy</a> caso estejam instaladas.</p>
<p>Os arquivos <code>build.*</code> s√£o scripts de compila√ß√£o em linha de comando. Note que h√° scripts correspondentes com extens√£o <code>.bat</code> para usar no <strong>Prompt de Comando</strong> do Windows <a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>:</p>
<ul>
<li><code>build.sh</code>/<code>build.bat</code>: para compilar a ABCg e os exemplos em bin√°rios nativos usando o compilador padr√£o (no nosso caso, o GCC);</li>
<li><code>build-wasm.sh</code>/<code>build-wasm.bat</code>: similar ao <code>build.sh</code>, mas para gerar bin√°rio em WebAssembly dentro do subdiret√≥rio <code>public</code>;</li>
<li><code>build-vs.bat</code>: similar ao <code>build.bat</code>, mas usando o compilador do Visual Studio 2022 ao inv√©s do GCC do MSYS2.</li>
</ul>
<p>O arquivo <code>CMakeLists.txt</code> √© o script de compila√ß√£o do CMake.</p>
<p>Os arquivos <code>runweb.sh</code> e <code>runweb.bat</code> podem ser usados para criar um servidor web local para servir o conte√∫do de <code>public</code>.</p>
<p>Os subdiret√≥rios s√£o os seguintes:</p>
<ul>
<li><code>abcg</code> cont√©m o c√≥digo-fonte da ABCg e suas depend√™ncias.</li>
<li><code>cmake</code> cont√©m scripts auxiliares de configura√ß√£o do CMake.</li>
<li><code>examples</code> cont√©m um exemplo de uso da ABCg: o ‚ÄúHello, World!‚Äù;</li>
<li><code>public</code> cont√©m os c√≥digos HTML para exibir o ‚ÄúHello, World!‚Äù no navegador.</li>
</ul>
<div class="infobox">
<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1.4em;width:1.4em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#555;overflow:visible;position:relative;"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></svg>
<div class="infoboxtitle">
Observa√ß√£o
</div>
<p>O ‚ÄúHello, World!‚Äù pode usar tanto a API gr√°fica <a href="https://www.opengl.org/">OpenGL</a> (c√≥digo-fonte em <code>examples/opengl</code>) quanto a API gr√°fica <a href="https://www.vulkan.org/">Vulkan</a> (c√≥digo-fonte em <code>examples/vulkan</code>).</p>
<p>Nesta disciplina usaremos o OpenGL em todas as atividades. Em particular, usaremos o OpenGL 3.3. Assim poderemos poss√≠vel construir aplica√ß√µes para desktop e web usando o mesmo c√≥digo-fonte. Por este motivo, os scripts CMake da ABCg est√£o configurados para usar o OpenGL por padr√£o.</p>
</div>
</div>
<div id="compilando-na-linha-de-comando" class="section level3 unnumbered hasAnchor">
<h3>Compilando na linha de comando<a href="abcg.html#compilando-na-linha-de-comando" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Execute o script <code>build.sh</code> (Linux/macOS) ou <code>build.bat</code> (Windows) para iniciar o processo de configura√ß√£o e constru√ß√£o da vers√£o OpenGL do ‚ÄúHello, World!‚Äù. A sa√≠da ser√° similar a esta (o exemplo a seguir mostra a sa√≠da no Ubuntu):</p>
<pre><code>-- The C compiler identification is GNU 11.2.0
-- The CXX compiler identification is GNU 11.2.0
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/lib/ccache/cc - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/lib/ccache/c++ - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
Using ccache
-- Found OpenGL: /usr/lib/x86_64-linux-gnu/libOpenGL.so   
-- Found GLEW: /usr/include (found version &quot;2.2.0&quot;) 
-- Looking for pthread.h
-- Looking for pthread.h - found
-- Performing Test CMAKE_HAVE_LIBC_PTHREAD
-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Success
-- Found Threads: TRUE  
-- Found SDL2: /usr/lib/x86_64-linux-gnu/libSDL2main.a;/usr/lib/x86_64-linux-gnu/libSDL2.so  
-- Found SDL2_image: /usr/lib/x86_64-linux-gnu/libSDL2_image.so  
-- Configuring done
-- Generating done
-- Build files have been written to: /home/ufabc/abcg/build
...
[100%] Linking CXX executable ../../bin/helloworld
[100%] Built target helloworld</code></pre>
<p>Ao final, os bin√°rios estar√£o dispon√≠veis no subdiret√≥rio <code>build</code>. A biblioteca est√°tica estar√° em <code>build/abcg/libabcg.a</code> e o execut√°vel do exemplo ‚ÄúHello, World!‚Äù estar√° em <code>build/bin/helloworld</code>.</p>
<p>Para testar, execute o <code>helloworld</code>. No Linux/macOS:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb61-1"><a href="abcg.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./build/bin/helloworld/helloworld</span></span></code></pre></div>
<p>No Windows:</p>
<pre class="cmd"><code>.\build\bin\helloworld\helloworld.exe | cat</code></pre>
<div class="notebox">
<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1.4em;width:1.4em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#1f5386;overflow:visible;position:relative;"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></svg>
<div class="noteboxtitle">
Importante
</div>
<p>No Windows, a sa√≠da deve sempre ser redirecionada para <code>cat</code> ou <code>tee</code>. Se isso n√£o for feito, nenhuma sa√≠da de texto ser√° exibida no terminal. Isso se deve a um bug do MSYS2.</p>
</div>
<div class="infobox">
<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1.4em;width:1.4em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#555;overflow:visible;position:relative;"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></svg>
<div class="infoboxtitle">
Observa√ß√£o
</div>
<p>Observe o conte√∫do de <code>build.sh</code> (<code>build.bat</code> cont√©m instru√ß√µes equivalentes):</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb63-1"><a href="abcg.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb63-2"><a href="abcg.html#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="bu">set</span> <span class="at">-euo</span> pipefail</span>
<span id="cb63-3"><a href="abcg.html#cb63-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-4"><a href="abcg.html#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="va">BUILD_TYPE</span><span class="op">=</span><span class="va">${1</span><span class="op">:-</span>Release<span class="va">}</span></span>
<span id="cb63-5"><a href="abcg.html#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="va">CMAKE_EXTRA_ARGS</span><span class="op">=</span><span class="va">${2</span><span class="op">:-</span><span class="st">&quot;&quot;</span><span class="va">}</span></span>
<span id="cb63-6"><a href="abcg.html#cb63-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-7"><a href="abcg.html#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Reset build directory</span></span>
<span id="cb63-8"><a href="abcg.html#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-rf</span> build</span>
<span id="cb63-9"><a href="abcg.html#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> build <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> build</span>
<span id="cb63-10"><a href="abcg.html#cb63-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-11"><a href="abcg.html#cb63-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Configure</span></span>
<span id="cb63-12"><a href="abcg.html#cb63-12" aria-hidden="true" tabindex="-1"></a><span class="fu">cmake</span> <span class="at">-DCMAKE_BUILD_TYPE</span><span class="op">=</span><span class="st">&quot;</span><span class="va">$BUILD_TYPE</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">$CMAKE_EXTRA_ARGS</span><span class="st">&quot;</span> ..</span>
<span id="cb63-13"><a href="abcg.html#cb63-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-14"><a href="abcg.html#cb63-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Build</span></span>
<span id="cb63-15"><a href="abcg.html#cb63-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">[[</span> <span class="st">&quot;</span><span class="va">$OSTYPE</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;darwin&quot;</span><span class="pp">*</span> <span class="kw">]];</span> <span class="cf">then</span></span>
<span id="cb63-16"><a href="abcg.html#cb63-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># macOS</span></span>
<span id="cb63-17"><a href="abcg.html#cb63-17" aria-hidden="true" tabindex="-1"></a>  <span class="va">NUM_PROCESSORS</span><span class="op">=</span><span class="st">&quot;</span><span class="va">$(</span><span class="ex">sysctl</span> <span class="at">-n</span> hw.ncpu<span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb63-18"><a href="abcg.html#cb63-18" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb63-19"><a href="abcg.html#cb63-19" aria-hidden="true" tabindex="-1"></a>  <span class="va">NUM_PROCESSORS</span><span class="op">=</span><span class="st">&quot;</span><span class="va">$(</span><span class="fu">nproc</span><span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb63-20"><a href="abcg.html#cb63-20" aria-hidden="true" tabindex="-1"></a><span class="cf">fi</span></span>
<span id="cb63-21"><a href="abcg.html#cb63-21" aria-hidden="true" tabindex="-1"></a><span class="fu">cmake</span> <span class="at">--build</span> . <span class="at">--config</span> <span class="st">&quot;</span><span class="va">$BUILD_TYPE</span><span class="st">&quot;</span> <span class="at">--</span> <span class="at">-j</span> <span class="st">&quot;</span><span class="va">$NUM_PROCESSORS</span><span class="st">&quot;</span></span></code></pre></div>
<ul>
<li><p>A vari√°vel <code>BUILD_TYPE</code> √© <code>Release</code> por padr√£o, mas pode ser modificada passando a string <code>Debug</code>, <code>MinSizeRel</code> ou <code>RelWithDebInfo</code> como primeiro argumento de <code>build.sh</code>. A op√ß√£o <code>Debug</code> ou <code>RelWithDebInfo</code> √© utilizada quando queremos gerar s√≠mbolos de depura√ß√£o. O modo <code>Release</code> (padr√£o) ou <code>MinSizeRel</code> devem ser usados quando queremos gerar um bin√°rio otimizado e sem arquivos de s√≠mbolos de depura√ß√£o. Em particular, <code>Release</code> otimiza em favor do c√≥digo mais r√°pido, enquanto <code>MinSizeRel</code> otimiza em favor do bin√°rio de menor tamanho.</p></li>
<li><p><code>build.sh</code>/<code>build.bat</code> tamb√©m aceita um segundo argumento que corresponde a uma string a ser passada como argumento do CMake durante a configura√ß√£o do projeto. Por exemplo, para compilar no modo <code>Release</code> e com a API gr√°fica OpenGL podemos executar <code>build.sh Release -DGRAPHICS_API=OpenGL</code> (neste caso basta executar <code>build.sh</code>, pois essas j√° s√£o as configura√ß√µes padr√£o).</p></li>
<li><p>Observe que o script apaga o subdiret√≥rio <code>build</code> antes de cri√°-lo novamente. Portanto, <strong>n√£o salve arquivos dentro de <code>build</code> pois eles ser√£o apagados na pr√≥xima compila√ß√£o!</strong></p></li>
<li><p>A gera√ß√£o dos bin√°rios usando o CMake √© composta de duas etapas: a <strong>configura√ß√£o</strong> (<code>cmake -DCMAKE_BUILD_TYPE=$BUILD_TYPE ..</code>) e a <strong>constru√ß√£o</strong> (<code>cmake --build . --config $BUILD_TYPE</code>). A configura√ß√£o gera os scripts do sistema de compila√ß√£o nativo (por exemplo, arquivos Makefile ou Ninja). A constru√ß√£o dispara a compila√ß√£o e liga√ß√£o usando tais scripts. Todos os arquivos gerados na configura√ß√£o e constru√ß√£o ficam armazenados no subdiret√≥rio <code>build</code>.</p></li>
</ul>
</div>
</div>
<div id="compilando-no-vs-code" class="section level3 unnumbered hasAnchor">
<h3>Compilando no VS Code<a href="abcg.html#compilando-no-vs-code" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Primeiramente, apague o subdiret√≥rio <code>build</code> caso voc√™ j√° tenha compilado a ABCg via linha de comando na se√ß√£o anterior.</p>
<p>No VS Code, selecione o menu ‚ÄúFile &gt; Open Folder‚Ä¶‚Äù e abra a pasta <code>abcg</code>. Na primeira vez que a pasta √© aberta aparecer√° uma caixa de mensagem perguntando se voc√™ confia nos autores do projeto. Esperamos que voc√™ selecione ‚ÄúYes‚Äù üòÖ:</p>
<p><img src="images/00_vscode_trust.png" style="display: block; margin: auto;" /></p>
<p>No canto inferior direito da janela aparecer√° uma notifica√ß√£o perguntando se voc√™ quer configurar o projeto. Selecione ‚ÄúYes‚Äù.</p>
<p><img src="images/00_cmake_configure.png" style="display: block; margin: auto;" /></p>
<p>Ao fazer isso, ser√° feita uma varredura no sistema para identificar os compiladores e <em>toolchains</em> dispon√≠veis. Uma lista dos ‚Äúkits‚Äù de compila√ß√£o encontrados aparecer√° na parte superior da janela. O exemplo a seguir √© o resultado exibido no Ubuntu:</p>
<p><img src="images/00_vscode_kits.png" style="display: block; margin: auto;" /></p>
<p>Selecione um kit compat√≠vel, como o <strong>GCC 11.2</strong> ou mais recente. Ao fazer isso, o CMake iniciar√° o processo de configura√ß√£o do projeto. Esse processo gera, dentro de um subdiret√≥rio <code>build</code>, os arquivos que ser√£o utilizados pelo sistema de constru√ß√£o nativo. Caso queira invocar manualmente a configura√ß√£o do CMake, acesse a <a href="https://code.visualstudio.com/docs/getstarted/userinterface">paleta de comandos</a> (<code>Ctrl+Shift+P</code>) e digite a op√ß√£o ‚ÄúCMake: Configure‚Äù.</p>
<p>Se aparecer uma notifica√ß√£o pedindo para configurar o projeto sempre que ele for aberto, selecione ‚ÄúYes‚Äù:</p>
<p><img src="images/00_cmake_configure2.png" style="display: block; margin: auto;" /></p>
<p>Ap√≥s o t√©rmino da configura√ß√£o, √© poss√≠vel que apare√ßa uma outra notifica√ß√£o solicitando permiss√£o para configurar o Intellisense. Selecione ‚ÄúAllow‚Äù.</p>
<p><img src="images/00_cmake_configure3.png" style="display: block; margin: auto;" /></p>
<p>Al√©m disso, pode aparecer tamb√©m uma notifica√ß√£o sobre o uso do arquivo <code>compile_commands.json</code>, como mostrado a seguir. Selecione ‚ÄúYes‚Äù novamente:</p>
<p><img src="images/00_cmake_configure4.png" style="display: block; margin: auto;" /></p>
<p>O arquivo <code>compile_commands.json</code> √© gerado automaticamente pelo CMake. Ele cont√©m os comandos de compila√ß√£o e o caminho de cada unidade de tradu√ß√£o utilizada no projeto. O IntelliSense (ou clangd) utiliza as informa√ß√µes desse arquivo para habilitar as refer√™ncias cruzadas.</p>
<div class="notebox">
<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1.4em;width:1.4em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#1f5386;overflow:visible;position:relative;"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></svg>
<div class="noteboxtitle">
Importante
</div>
<p>A constru√ß√£o dos projetos usando o CMake √© feita em duas etapas:</p>
<ol style="list-style-type: decimal">
<li><strong>Configura√ß√£o</strong>: consiste na gera√ß√£o dos scripts do sistema de compila√ß√£o nativo (por exemplo, arquivos Makefile ou Ninja);</li>
<li><strong>Constru√ß√£o</strong>: consiste no disparo da compila√ß√£o e liga√ß√£o usando os scripts gerados na configura√ß√£o, al√©m da execu√ß√£o de etapas de pr√© e p√≥s-constru√ß√£o definidas nos scripts dos arquivos <code>CMakeLists.txt</code>.</li>
</ol>
<p>Tanto os arquivos da configura√ß√£o quanto os da constru√ß√£o (bin√°rios) s√£o gravados no subdiret√≥rio <code>build</code>.</p>
<p>Geralmente a configura√ß√£o s√≥ precisa ser feita uma vez e depois refeita caso o subdiret√≥rio <code>build</code> tenha sido apagado, ou ap√≥s a altera√ß√£o do kit de compila√ß√£o, ou ainda ap√≥s a altera√ß√£o do <a href="https://cmake.org/cmake/help/latest/variable/CMAKE_BUILD_TYPE.html"><em>build type</em></a> (por exemplo, de <code>Debug</code> para <code>Release</code>). As informa√ß√µes de configura√ß√£o ficam armazenadas em um arquivo <code>CMakeCache.txt</code> dentro de <code>build</code>.</p>
<p>Como indicado na figura abaixo, na barra de status h√° bot√µes para selecionar o build type/configurar, selecionar o kit de compila√ß√£o, e construir a aplica√ß√£o. A op√ß√£o de construir j√° se encarrega de configurar o projeto caso os arquivos de configura√ß√£o ainda n√£o tenham sido gerados.</p>
<p><img src="images/00_vscode.png" style="display: block; margin: auto;" /></p>
<p>Essas op√ß√µes tamb√©m est√£o dispon√≠veis na paleta de comandos. Os comandos s√£o:</p>
<ul>
<li><strong>‚ÄúCMake: Select Variant‚Äù</strong>: para selecionar um build type;</li>
<li><strong>‚ÄúCMake: Select a Kit‚Äù</strong>: para selecionar um kit de compila√ß√£o;</li>
<li><strong>‚ÄúCMake: Configure‚Äù</strong>: para configurar o projeto usando o kit e o build type atual;</li>
<li><strong>‚ÄúCMake: Build‚Äù</strong>: para construir o projeto.</li>
<li><strong>‚ÄúCMake: Clean Rebuild‚Äù</strong>: para apagar as configura√ß√µes anteriores do CMake, reconfigurar e reconstruir o projeto.</li>
</ul>
</div>
<div class="infobox">
<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1.4em;width:1.4em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#555;overflow:visible;position:relative;"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></svg>
<div class="infoboxtitle">
Observa√ß√£o
</div>
<p>Os build types permitidos no CMake s√£o:</p>
<ul>
<li><code>Debug</code> para gerar bin√°rios n√£o otimizados e com arquivos de s√≠mbolos de depura√ß√£o. Esse √© o build type padr√£o (ao contr√°rio de <code>build.sh</code> e <code>build.bat</code>, que usam o modo <code>Release</code> por padr√£o);</li>
<li><code>RelWithDebInfo</code> para gerar arquivos de s√≠mbolos de depura√ß√£o com bin√°rios otimizados;</li>
<li><code>Release</code> para gerar bin√°rios otimizados e favorecer c√≥digo mais r√°pido. Essa op√ß√£o n√£o gera os arquivos de s√≠mbolos de depura√ß√£o;</li>
<li><code>MinSizeRel</code>, semelhante ao <code>Release</code>, mas a otimiza√ß√£o tenta gerar bin√°rio de menor tamanho.</li>
</ul>
</div>
<p>Para compilar e gerar os bin√°rios, tecle <code>F7</code> ou clique em ‚ÄúBuild‚Äù na barra de status. O progresso ser√° exibido na janela ‚ÄúOutput‚Äù do CMake/Build. Se a constru√ß√£o terminar com sucesso, a √∫ltima linha de texto da janela Output ser√°:</p>
<pre><code>[build] Build finished with exit code 0</code></pre>
<p>Os arquivos gerados na constru√ß√£o ficam armazenados no subdiret√≥rio <code>build</code>, da mesma forma como ocorre na compila√ß√£o via linha de comando.</p>
<p>Para testar, abra um terminal e execute <code>./build/bin/helloworld/helloworld</code> (Linux/macOS) ou <code>.\build\bin\helloworld\helloworld.exe</code> (Windows).</p>
<div class="warningbox">
<svg aria-hidden="true" role="img" viewBox="0 0 448 512" style="height:1.4em;width:1.22em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#861f1f;overflow:visible;position:relative;"><path d="M323.56 51.2c-20.8 19.3-39.58 39.59-56.22 59.97C240.08 73.62 206.28 35.53 168 0 69.74 91.17 0 209.96 0 281.6 0 408.85 100.29 512 224 512s224-103.15 224-230.4c0-53.27-51.98-163.14-124.44-230.4zm-19.47 340.65C282.43 407.01 255.72 416 226.86 416 154.71 416 96 368.26 96 290.75c0-38.61 24.31-72.63 72.79-130.75 6.93 7.98 98.83 125.34 98.83 125.34l58.63-66.88c4.14 6.85 7.91 13.55 11.27 19.97 27.35 52.19 15.81 118.97-33.43 153.42z"/></svg>
<div class="warningboxtitle">
Aten√ß√£o
</div>
<p>A configura√ß√£o do CMake gerada a partir do VS Code n√£o √© necessariamente a mesma gerada usando os scripts de linha de comando: o compilador pode ser diferente, ou o build type pode ser diferente.</p>
<p>Se em algum momento voc√™ construir o projeto via linha de comando usando os scripts <code>.sh</code> ou <code>.bat</code> e depois quiser construir pelo editor, <strong>apague o subdiret√≥rio <code>build</code> antes de retornar ao VS Code</strong>. Isso for√ßar√° uma nova configura√ß√£o do CMake e evitar√° erros de incompatibilidade entre as configura√ß√µes.</p>
</div>
<p>Na primeira vez que um arquivo com extens√£o <code>.cpp</code> for aberto no editor, algumas notifica√ß√µes poder√£o aparecer. Experimente abrir, por exemplo, <code>examples\helloworld\main.cpp</code>. Se a extens√£o <a href="https://marketplace.visualstudio.com/items?itemName=llvm-vs-code-extensions.vscode-clangd">clangd</a> foi instalada como sugerido na se√ß√£o <a href="vscode.html#vscode">1.4</a>, a caixa de mensagem a seguir ser√° exibida. Selecione ‚ÄúInstall‚Äù.</p>
<p><img src="images/00_vscode_clangd1.png" style="display: block; margin: auto;" /></p>
<p>A seguinte mensagem tamb√©m poder√° aparecer. Neste caso, selecione ‚ÄúDisable IntelliSense‚Äù:</p>
<p><img src="images/00_vscode_clangd2.png" style="display: block; margin: auto;" /></p>
<p>Ao final dessas configura√ß√µes, reinicie o editor. Isso pode ser feito rapidamente selecionando a op√ß√£o ‚ÄúDeveloper: Reload Window‚Äù da paleta de comandos.</p>
</div>
<div id="depurando-no-vs-code" class="section level3 unnumbered hasAnchor">
<h3>Depurando no VS Code<a href="abcg.html#depurando-no-vs-code" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Podemos depurar facilmente nossas aplica√ß√µes com GDB ou LLDB usando a interface do VS Code.</p>
<p>Ap√≥s construir um projeto com build type <code>Debug</code> ou <code>RelWithDebInfo</code>, devemos abrir um de seus arquivos com extens√£o <code>.cpp</code>. Isso √© necess√°rio para fazer com que o VS Code identifique que queremos configurar a depura√ß√£o de um projeto em linguagem C++. Por exemplo, para configurar a depura√ß√£o do projeto ‚ÄúHello, World!‚Äù, abra o arquivo <code>examples\helloworld\main.cpp</code>.</p>
<p>Selecione a op√ß√£o ‚ÄúRun and Debug‚Äù na barra de atividades (<code>Ctrl+Shift+D</code>). Em seguida, clique na op√ß√£o ‚Äúcreate a launch.json file‚Äù:</p>
<p><img src="images/00_vscode_run.png" style="display: block; margin: auto;" /></p>
<p>Se aparecer um <em>drop-down list</em> de sele√ß√£o do ambiente de depura√ß√£o, selecione ‚ÄúC++ (GDB/LLDB)‚Äù. Isso criar√° o arquivo <code>launch.json</code>. O arquivo tamb√©m ser√° aberto no editor.</p>
<p><img src="images/00_vscode_run2.png" style="display: block; margin: auto;" /></p>
<p>Copie e cole em <code>launch.json</code> o conte√∫do exibido a seguir. Este √© uma exemplo para depurar o ‚ÄúHello, World!‚Äù no Linux ou macOS usando o GDB. Um exemplo de configura√ß√£o para o Windows √© mostrado mais adiante:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb65-1"><a href="abcg.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb65-2"><a href="abcg.html#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;version&quot;</span><span class="fu">:</span> <span class="st">&quot;0.2.0&quot;</span><span class="fu">,</span></span>
<span id="cb65-3"><a href="abcg.html#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;configurations&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb65-4"><a href="abcg.html#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb65-5"><a href="abcg.html#cb65-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;(gdb) Launch&quot;</span><span class="fu">,</span></span>
<span id="cb65-6"><a href="abcg.html#cb65-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;cppdbg&quot;</span><span class="fu">,</span></span>
<span id="cb65-7"><a href="abcg.html#cb65-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;request&quot;</span><span class="fu">:</span> <span class="st">&quot;launch&quot;</span><span class="fu">,</span></span>
<span id="cb65-8"><a href="abcg.html#cb65-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;program&quot;</span><span class="fu">:</span> <span class="st">&quot;${workspaceFolder}/build/bin/helloworld/helloworld&quot;</span><span class="fu">,</span></span>
<span id="cb65-9"><a href="abcg.html#cb65-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;args&quot;</span><span class="fu">:</span> <span class="ot">[]</span><span class="fu">,</span></span>
<span id="cb65-10"><a href="abcg.html#cb65-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;stopAtEntry&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb65-11"><a href="abcg.html#cb65-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;cwd&quot;</span><span class="fu">:</span> <span class="st">&quot;${fileDirname}&quot;</span><span class="fu">,</span></span>
<span id="cb65-12"><a href="abcg.html#cb65-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;environment&quot;</span><span class="fu">:</span> <span class="ot">[]</span><span class="fu">,</span></span>
<span id="cb65-13"><a href="abcg.html#cb65-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;externalConsole&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb65-14"><a href="abcg.html#cb65-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;MIMode&quot;</span><span class="fu">:</span> <span class="st">&quot;gdb&quot;</span><span class="fu">,</span></span>
<span id="cb65-15"><a href="abcg.html#cb65-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;setupCommands&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb65-16"><a href="abcg.html#cb65-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb65-17"><a href="abcg.html#cb65-17" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Enable pretty-printing for gdb&quot;</span><span class="fu">,</span></span>
<span id="cb65-18"><a href="abcg.html#cb65-18" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;-enable-pretty-printing&quot;</span><span class="fu">,</span></span>
<span id="cb65-19"><a href="abcg.html#cb65-19" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;ignoreFailures&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb65-20"><a href="abcg.html#cb65-20" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb65-21"><a href="abcg.html#cb65-21" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb65-22"><a href="abcg.html#cb65-22" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;description&quot;</span><span class="fu">:</span>  <span class="st">&quot;Set Disassembly Flavor to Intel&quot;</span><span class="fu">,</span></span>
<span id="cb65-23"><a href="abcg.html#cb65-23" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;-gdb-set disassembly-flavor intel&quot;</span><span class="fu">,</span></span>
<span id="cb65-24"><a href="abcg.html#cb65-24" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;ignoreFailures&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb65-25"><a href="abcg.html#cb65-25" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb65-26"><a href="abcg.html#cb65-26" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span></span>
<span id="cb65-27"><a href="abcg.html#cb65-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb65-28"><a href="abcg.html#cb65-28" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb65-29"><a href="abcg.html#cb65-29" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Observe que o valor da chave <code>program</code> aponta para o execut√°vel do projeto: <code>${workspaceFolder}/build/bin/helloworld/helloworld</code>.</p>
<div class="infobox">
<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1.4em;width:1.4em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#555;overflow:visible;position:relative;"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></svg>
<div class="infoboxtitle">
Observa√ß√£o
</div>
<p><code>${workspaceFolder}</code> √© uma vari√°vel pr√©-definida do VS Code que cont√©m o caminho da pasta do projeto. Consulte a <a href="https://code.visualstudio.com/docs/editor/variables-reference">documenta√ß√£o</a> para informa√ß√µes sobre outras vari√°veis dispon√≠veis.</p>
</div>
<p>A listagem a seguir mostra um exemplo de <code>launch.json</code> para depurar o ‚ÄúHello, World!‚Äù no Windows usando o GDB do MSYS2:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb66-1"><a href="abcg.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb66-2"><a href="abcg.html#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;version&quot;</span><span class="fu">:</span> <span class="st">&quot;0.2.0&quot;</span><span class="fu">,</span></span>
<span id="cb66-3"><a href="abcg.html#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;configurations&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb66-4"><a href="abcg.html#cb66-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb66-5"><a href="abcg.html#cb66-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;(gdb) Launch&quot;</span><span class="fu">,</span></span>
<span id="cb66-6"><a href="abcg.html#cb66-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;cppdbg&quot;</span><span class="fu">,</span></span>
<span id="cb66-7"><a href="abcg.html#cb66-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;request&quot;</span><span class="fu">:</span> <span class="st">&quot;launch&quot;</span><span class="fu">,</span></span>
<span id="cb66-8"><a href="abcg.html#cb66-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;program&quot;</span><span class="fu">:</span> <span class="st">&quot;${workspaceFolder}/build/bin/helloworld/helloworld.exe&quot;</span><span class="fu">,</span></span>
<span id="cb66-9"><a href="abcg.html#cb66-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;args&quot;</span><span class="fu">:</span> <span class="ot">[]</span><span class="fu">,</span></span>
<span id="cb66-10"><a href="abcg.html#cb66-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;stopAtEntry&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb66-11"><a href="abcg.html#cb66-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;cwd&quot;</span><span class="fu">:</span> <span class="st">&quot;${workspaceFolder}&quot;</span><span class="fu">,</span></span>
<span id="cb66-12"><a href="abcg.html#cb66-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;environment&quot;</span><span class="fu">:</span> <span class="ot">[]</span><span class="fu">,</span></span>
<span id="cb66-13"><a href="abcg.html#cb66-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;externalConsole&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb66-14"><a href="abcg.html#cb66-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;MIMode&quot;</span><span class="fu">:</span> <span class="st">&quot;gdb&quot;</span><span class="fu">,</span></span>
<span id="cb66-15"><a href="abcg.html#cb66-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;miDebuggerPath&quot;</span><span class="fu">:</span> <span class="st">&quot;C:</span><span class="ch">\\</span><span class="st">msys64</span><span class="ch">\\</span><span class="st">mingw64</span><span class="ch">\\</span><span class="st">bin</span><span class="ch">\\</span><span class="st">gdb.exe&quot;</span><span class="fu">,</span></span>
<span id="cb66-16"><a href="abcg.html#cb66-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;setupCommands&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb66-17"><a href="abcg.html#cb66-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb66-18"><a href="abcg.html#cb66-18" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Enable pretty-printing for gdb&quot;</span><span class="fu">,</span></span>
<span id="cb66-19"><a href="abcg.html#cb66-19" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;-enable-pretty-printing&quot;</span><span class="fu">,</span></span>
<span id="cb66-20"><a href="abcg.html#cb66-20" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;ignoreFailures&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb66-21"><a href="abcg.html#cb66-21" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb66-22"><a href="abcg.html#cb66-22" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb66-23"><a href="abcg.html#cb66-23" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;description&quot;</span><span class="fu">:</span>  <span class="st">&quot;Set Disassembly Flavor to Intel&quot;</span><span class="fu">,</span></span>
<span id="cb66-24"><a href="abcg.html#cb66-24" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;text&quot;</span><span class="fu">:</span> <span class="st">&quot;-gdb-set disassembly-flavor intel&quot;</span><span class="fu">,</span></span>
<span id="cb66-25"><a href="abcg.html#cb66-25" aria-hidden="true" tabindex="-1"></a>          <span class="dt">&quot;ignoreFailures&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb66-26"><a href="abcg.html#cb66-26" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span>        </span>
<span id="cb66-27"><a href="abcg.html#cb66-27" aria-hidden="true" tabindex="-1"></a>      <span class="ot">]</span></span>
<span id="cb66-28"><a href="abcg.html#cb66-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb66-29"><a href="abcg.html#cb66-29" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb66-30"><a href="abcg.html#cb66-30" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>Veja que o valor da chave <code>miDebuggerPath</code> cont√©m o caminho completo do GDB, que √© <code>C:\msys64\mingw64\bin\gdb.exe</code> supondo que o MSYS2 tenha sido instalado em <code>C:\msys64</code>.</p>
<p>O valor da chave <code>externalConsole</code> pode ser modificado para <code>true</code> caso voc√™ prefira que um novo terminal seja aberto durante a depura√ß√£o. Consulte a <a href="https://code.visualstudio.com/docs/editor/debugging">documenta√ß√£o sobre depura√ß√£o</a> para informa√ß√µes sobre outras op√ß√µes e informa√ß√µes gerais sobre como depurar c√≥digo no editor.</p>
<p>Ap√≥s modificar o arquivo <code>launch.json</code>, selecione novamente a op√ß√£o ‚ÄúRun‚Äù na barra de atividades ou aperte <code>F5</code> para iniciar o programa no modo de depura√ß√£o.</p>
<p>Reedite o arquivo <code>launch.json</code> sempre que mudar o nome do execut√°vel que voc√™ queira depurar.</p>
<div class="infobox">
<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1.4em;width:1.4em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#555;overflow:visible;position:relative;"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></svg>
<div class="infoboxtitle">
Observa√ß√£o
</div>
<p>No VS Code para Windows, configure o terminal padr√£o para ‚ÄúCommand Prompt‚Äù no lugar de ‚ÄúPowerShell‚Äù, uma vez que nossos scripts s√£o compat√≠veis apenas com o Prompt de Comando. Para fazer isso, abra a paleta de comandos (<code>Ctrl+Shift+P</code>), acesse o comando ‚ÄúTerminal: Select Default Profile‚Äù e ent√£o selecione ‚ÄúCommand Prompt‚Äù.</p>
</div>
</div>
<div id="compilando-para-wasm" class="section level3 unnumbered hasAnchor">
<h3>Compilando para WASM<a href="abcg.html#compilando-para-wasm" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Podemos compilar as aplica√ß√µes ABCg para WebAssembly (WASM) de modo a execut√°-las diretamente no navegador. A constru√ß√£o √© feita via linha de comando usando o <em>toolchain</em> <a href="https://emscripten.org/">Emscripten</a>. Acompanhe a seguir como construir o ‚ÄúHello, World!‚Äù para WASM e como test√°-lo no navegador:</p>
<ol style="list-style-type: decimal">
<li>Em um terminal (shell ou Prompt de Comando), ative as vari√°veis de ambiente do Emscripten (script <code>emsdk_env.sh</code>/<code>emsdk_env.bat</code> do SDK). Ap√≥s isso, o compilador <code>emcc</code> dever√° estar vis√≠vel no <code>PATH</code>;</li>
<li>No diret√≥rio <code>abcg</code>, execute <code>build-wasm.sh</code> (Linux/macOS) ou <code>build-wasm.bat</code> (Windows). Isso far√° com que o CMake inicie a configura√ß√£o do projeto e a constru√ß√£o dos bin√°rios. Os arquivos resultantes ser√£o gravados em <code>abcg/public</code>. Em nosso caso, esses arquivos s√£o <code>helloworld.data</code> (arquivo de dados/assets), <code>helloworld.js</code> (arquivo JavaScript) e <code>helloworld.wasm</code> (bin√°rio WebAssembly);</li>
<li>Execute o script <code>runweb.sh</code> (Linux/macOS) ou <code>runweb.bat</code> (Windows) para rodar um servidor web local. O conte√∫do de <code>public</code> ficar√° dispon√≠vel em <a href="http://localhost:8080/">http://localhost:8080/</a>;</li>
<li>Abra a p√°gina <a href="http://localhost:8080/helloworld.html">http://localhost:8080/helloworld.html</a> que chama o script <code>helloworld.js</code> rec√©m-criado. A p√°gina HTML n√£o faz parte do processo de constru√ß√£o e foi criada previamente.</li>
</ol>
<p>O resultado ser√° semelhante ao exibido a seguir: uma aplica√ß√£o mostrando um tri√¢ngulo colorido e uma caixa de di√°logo com alguns controles de interface. A pequena janela de texto abaixo da janela da aplica√ß√£o √© uma √°rea de texto em HTML que mostra o conte√∫do do terminal. Aqui, s√£o exibidas algumas informa√ß√µes sobre o OpenGL (vers√£o utilizada, fornecedor do driver, etc).</p>
<iframe
  src="https://hbatagelo.github.io/abcgapps/helloworld/index.html"
  allow="gamepad" frameborder="0" allowfullscreen="true" allowtransparency="true" emscriptenheight="745" scrolling="no"
  ></iframe>
<div class="infobox">
<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1.4em;width:1.4em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#555;overflow:visible;position:relative;"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></svg>
<div class="infoboxtitle">
Observa√ß√£o
</div>
<p>O subdiret√≥rio <code>public</code> cont√©m, al√©m do <code>helloworld.html</code>:</p>
<ul>
<li><code>full_window.html</code>: para exibir o ‚ÄúHello, World!‚Äù ocupando a janela inteira do navegador;</li>
<li><code>full_window_console.html</code>: id√™ntico ao anterior, mas com a sobreposi√ß√£o das mensagens do console na tela.</li>
</ul>
</div>
<p>Nos pr√≥ximos cap√≠tulos veremos como construir novas aplica√ß√µes usando a ABCg.</p>
</div>
<div id="revis√£o-de-c" class="section level3 unnumbered hasAnchor">
<h3>Revis√£o de C++<a href="abcg.html#revis√£o-de-c" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Se voc√™ est√° mais habituado com programa√ß√£o em C ou C++ anterior ao C++11, o c√≥digo das atividades da disciplina usando a ABCg poder√° parecer pouco familiar. Revisaremos nesta se√ß√£o alguns dos conceitos de C++ que podem gerar d√∫vidas em programadores que vieram da linguagem C, como a convers√£o expl√≠cita de tipos usando <strong><em>named casts</em></strong>, <strong>inicializa√ß√£o uniforme</strong> com <code>{}</code> e uso da <strong>palavra-chave <code>auto</code></strong>. A aplica√ß√£o desses conceitos segue as boas pr√°ticas de programa√ß√£o indicadas no <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines">C++ Core Guidelines</a>.</p>
<div class="tipbox">
<svg aria-hidden="true" role="img" viewBox="0 0 352 512" style="height:1.4em;width:0.96em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#7e4d1d;overflow:visible;position:relative;"><path d="M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"/></svg>
<div class="tipboxtitle">
Dica
</div>
<p>Aproveite as primeiras semanas de aula para se familiarizar com os conceitos do chamado ‚ÄúC++ moderno‚Äù (C++11 em diante). Isso facilitar√° o entendimento do c√≥digo da ABCg nos pr√≥ximos cap√≠tulos.</p>
<ul>
<li><p>Uma refer√™ncia r√°pida (<em>cheatsheet</em>) ao C++ moderno est√° dispon√≠vel em <a href="https://github.com/AnthonyCalandra/modern-cpp-features">https://github.com/AnthonyCalandra/modern-cpp-features</a>.</p></li>
<li><p>Um excelente livro √© o <a href="https://www.stroustrup.com/Tour.html">A Tour of C++</a>, de Bjarne Stroustrup. H√° tamb√©m recursos gratuitos como os sites <a href="https://www.learncpp.com/">learncpp.com</a> e <a href="https://www.tutorialspoint.com/cplusplus/index.htm">tutorialspoint.com</a>.</p></li>
<li><p>A <a href="https://docs.microsoft.com/pt-br/cpp/cpp/">documenta√ß√£o da Microsoft sobre C++</a> √© uma op√ß√£o em portugu√™s. H√° uma refer√™ncia sobre a linguagem C++ e sobre a biblioteca C++ padr√£o.</p></li>
<li><p>Consulte tamb√©m o <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines">C++ Core Guidelines</a> para ficar a par das boas pr√°ticas de programa√ß√£o.</p></li>
<li><p>Uma refer√™ncia mais completa e aprofundada da linguagem est√° dispon√≠vel em <a href="https://cppreference.com/">cppreference.com</a>. Algumas partes est√£o traduzidas para o portugu√™s.</p></li>
</ul>
</div>
<div id="named-casts" class="section level4 unnumbered hasAnchor">
<h4>Named casts<a href="abcg.html#named-casts" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Observe os seguintes exemplos de convers√µes expl√≠citas de tipos (<em>casts</em>) usando a sintaxe tradicional oriunda da linguagem C:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb67-1"><a href="abcg.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)</span><span class="fl">7.9</span><span class="op">;</span>              <span class="co">// double para int</span></span>
<span id="cb67-2"><a href="abcg.html#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> b <span class="op">=</span> <span class="op">(</span><span class="dt">float</span><span class="op">)</span><span class="dv">1</span> <span class="op">/</span> <span class="dv">3</span><span class="op">;</span>        <span class="co">// int para float</span></span>
<span id="cb67-3"><a href="abcg.html#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="dt">unsigned</span> <span class="op">*</span>pa <span class="op">=</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="op">*)&amp;</span>a<span class="op">;</span> <span class="co">// int* para unsigned*</span></span>
<span id="cb67-4"><a href="abcg.html#cb67-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-5"><a href="abcg.html#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> foo<span class="op">(</span>Base <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb67-6"><a href="abcg.html#cb67-6" aria-hidden="true" tabindex="-1"></a>  Derived <span class="op">*</span>pd <span class="op">=</span> <span class="op">(</span>Derived <span class="op">*)</span>b<span class="op">;</span>  <span class="co">// Base* para Derived*</span></span>
<span id="cb67-7"><a href="abcg.html#cb67-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb67-8"><a href="abcg.html#cb67-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Estes casts ‚Äúestilo C‚Äù t√™m uma sintaxe concisa, mas nem sempre traduzem de forma clara a inten√ß√£o do programador. Al√©m disso, a convers√£o √© feita por conta e risco do programador. N√£o h√° verifica√ß√£o da validade da convers√£o, por exemplo, na convers√£o de <code>Base*</code> (ponteiro de uma classe base) para <code>Derived*</code> (ponteiro para uma classe derivada de <code>Base</code>).</p>
<p>C++ procura tornar as convers√µes expl√≠citas mais expressivas e seguras atrav√©s de quatro tipos de casts chamados de <em>named casts</em>:</p>
<ul>
<li><code>static_cast</code> para convers√µes entre tipos b√°sicos cuja validade pode ser verificada em tempo de compila√ß√£o (por exemplo, <code>float</code> para <code>int</code> e vice-versa);</li>
<li><code>const_cast</code> para convers√µes entre tipos de diferentes qualifica√ß√µes (por exemplo, de <code>int const</code> para <code>int</code>);</li>
<li><code>reinterpret_cast</code> para convers√µes entre tipos representados por diferentes padr√µes de bits na mem√≥ria (por exemplo, <code>int*</code> para <code>char*</code>);</li>
<li><code>dynamic_cast</code> para convers√µes de ponteiros e refer√™ncias a objetos com polimorfismo din√¢mico.</li>
</ul>
<p>Os exemplos anteriores podem ser escritos assim com named casts:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb68-1"><a href="abcg.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="kw">static_cast</span><span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;(</span><span class="fl">7.9</span><span class="op">);</span>                   <span class="co">// double para int</span></span>
<span id="cb68-2"><a href="abcg.html#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> b <span class="op">=</span> <span class="kw">static_cast</span><span class="op">&lt;</span><span class="dt">float</span><span class="op">&gt;(</span><span class="dv">1</span><span class="op">)</span> <span class="op">/</span> <span class="dv">3</span><span class="op">;</span>             <span class="co">// int para float</span></span>
<span id="cb68-3"><a href="abcg.html#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="dt">unsigned</span> <span class="op">*</span>pa <span class="op">=</span> <span class="kw">reinterpret_cast</span><span class="op">&lt;</span><span class="dt">unsigned</span> <span class="op">*&gt;(&amp;</span>a<span class="op">);</span> <span class="co">// int* para unsigned*</span></span>
<span id="cb68-4"><a href="abcg.html#cb68-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-5"><a href="abcg.html#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> foo<span class="op">(</span>Base <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-6"><a href="abcg.html#cb68-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">// N√£o compila se Base n√£o for uma classe polim√≥rfica</span></span>
<span id="cb68-7"><a href="abcg.html#cb68-7" aria-hidden="true" tabindex="-1"></a>  Derived <span class="op">*</span>pd <span class="op">=</span> <span class="kw">dynamic_cast</span><span class="op">&lt;</span>Derived <span class="op">*&gt;(</span>b<span class="op">);</span>      <span class="co">// Base* para Derived*</span></span>
<span id="cb68-8"><a href="abcg.html#cb68-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb68-9"><a href="abcg.html#cb68-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>A sintaxe √© mais verbosa, mas a inten√ß√£o do programador fica mais clara e o c√≥digo torna-se mais seguro. Por exemplo, <code>dynamic_cast</code> retorna nulo se <code>b</code> (ponteiro para <code>Base</code>) n√£o puder ser convertido para <code>Derived*</code> (por exemplo, se o objeto apontado por <code>b</code> √© de uma classe incompat√≠vel com <code>Derived</code>). Esse erro passaria despercebido com o cast estilo C.</p>
<p>O ideal √© usarmos a menor quantidade poss√≠vel de casts. Em geral s√≥ precisaremos usar <code>static_cast</code>, e <code>reinterpret_cast</code> nas atividades do curso. Entretanto, os c√≥digos das atividades v√£o um pouco mais al√©m e seguem a diretriz <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#prosafety-type-safety-profile">Pro.safety</a> do C++ Core Guidelines. Essa diretriz recomenda o uso de <code>gsl::narrow_cast</code> e <code>gsl::narrow</code> no lugar de <code>static_cast</code> para <em>convers√µes com estreitamento</em>:</p>
<ul>
<li><code>gsl::narrow_cast</code> √© o mesmo que <code>static_cast</code>.</li>
<li><code>gsl::narrow</code> √© o mesmo que <code>static_cast</code> quando n√£o h√° perda de informa√ß√£o na convers√£o. Se houver perda de informa√ß√£o, ocorre um erro de compila√ß√£o.</li>
</ul>
<p>Convers√µes com estreitamento s√£o aquelas em que existe a possiblidade de perda de informa√ß√£o (por exemplo, <code>float</code> para <code>int</code>, ou <code>double</code> para <code>float</code>). Considere o seguinte exemplo de substitui√ß√£o de <code>static_cast</code> por <code>gsl::narrow</code> em uma convers√£o com estreitamento:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb69-1"><a href="abcg.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">// float x = static_cast&lt;float&gt;(7.9); // Antes: OK</span></span>
<span id="cb69-2"><a href="abcg.html#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="dt">float</span> x <span class="op">=</span> gsl<span class="op">::</span>narrow<span class="op">&lt;</span><span class="dt">float</span><span class="op">&gt;(</span><span class="fl">7.9</span><span class="op">);</span>    <span class="co">// Depois: inten√ß√£o mais clara</span></span></code></pre></div>
<p>Poder√≠amos usar <code>static_cast</code>, mas o uso de <code>gsl::narrow</code> deixa nossa inten√ß√£o mais clara: esperamos que a convers√£o de <code>7.9</code> (um <code>double</code>) para <code>float</code> n√£o perca informa√ß√£o. Afinal, <code>float</code> tem precis√£o suficiente para representar uma casa decimal. Se por algum motivo houver perda de informa√ß√£o, <code>gsl::narrow</code> gerar√° um erro de compila√ß√£o e ent√£o saberemos que algo est√° errado<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>.</p>
<p>Agora considere o seguinte exemplo de substitui√ß√£o de <code>static_cast</code> por <code>gsl::narrow_cast</code>:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb70-1"><a href="abcg.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co">// int x = static_cast&lt;int&gt;(7.9f);   // Antes: OK</span></span>
<span id="cb70-2"><a href="abcg.html#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> x <span class="op">=</span> gsl<span class="op">::</span>narrow_cast<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;(</span><span class="fl">7.9</span><span class="bu">f</span><span class="op">);</span> <span class="co">// Depois: inten√ß√£o mais clara</span></span></code></pre></div>
<p>Nesse caso tamb√©m poder√≠amos usar <code>static_cast</code>, mas <code>gsl::narrow_cast</code> deixa nossa inten√ß√£o mais clara: esperamos que a convers√£o de <code>7.9f</code> (um <code>float</code>) para um <code>int</code> perca informa√ß√£o. Afinal, a parte fracion√°ria ser√° perdida. <code>gsl::narrow_cast</code> indica que estamos ciente dessa perda e que isso n√£o √© um problema para n√≥s.</p>
<p>Em resumo, em convers√µes com estreitamento, isto √©, com poss√≠vel perda de informa√ß√£o, o uso de <code>gsl::narrow</code> e <code>gsl::narrow_cast</code> mostra melhor a inten√ß√£o do programador. Ademais, de nossa parte, faz com que tenhamos que pensar melhor se estamos usando o <code>static_cast</code> corretamente.</p>
</div>
<div id="inicializa√ß√£o-uniforme" class="section level4 unnumbered hasAnchor">
<h4>Inicializa√ß√£o uniforme<a href="abcg.html#inicializa√ß√£o-uniforme" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Nas atividades do curso usaremos a chamada <em>inicializa√ß√£o uniforme</em> sempre que poss√≠vel.</p>
<p>A inicializa√ß√£o uniforme consiste no uso de <code>{}</code> no lugar de <code>=</code> ou <code>()</code> para inicializar objetos. Segundo a diretriz <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#es23-prefer-the--initializer-syntax">ES.23</a> do C++ Core Guidelines, ‚Äúas regras para inicializa√ß√£o com <code>{}</code> s√£o mais simples, mais gerais, menos amb√≠guas, e mais seguras do que outras formas de inicializa√ß√£o‚Äù.</p>
<p>Observe os exemplos abaixo <strong>sem</strong> inicializa√ß√£o com <code>{}</code>, isto √©, usando apenas <code>=</code> ou <code>()</code>:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb71-1"><a href="abcg.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">// Inicializa a com 0</span></span>
<span id="cb71-2"><a href="abcg.html#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> b<span class="op">(</span><span class="dv">42</span><span class="op">);</span>  <span class="co">// Inicializa b com 42</span></span>
<span id="cb71-3"><a href="abcg.html#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> c<span class="op">();</span> <span class="co">// Declara√ß√£o de uma fun√ß√£o (amb√≠guo)</span></span>
<span id="cb71-4"><a href="abcg.html#cb71-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-5"><a href="abcg.html#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> d <span class="op">=</span> <span class="fl">7.9</span><span class="op">;</span>         <span class="co">// Inicializa implicitamente com 7 (inseguro)</span></span>
<span id="cb71-6"><a href="abcg.html#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> pi <span class="op">=</span> <span class="fl">3.1415</span><span class="bu">f</span><span class="op">;</span> <span class="co">// Inicializa implicitamente com 3.1415</span></span>
<span id="cb71-7"><a href="abcg.html#cb71-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-8"><a href="abcg.html#cb71-8" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;</span> v1<span class="op">(</span><span class="dv">3</span><span class="op">);</span>    <span class="co">// Inicializa v1 com 3 elementos de valor 0 (amb√≠guo)</span></span>
<span id="cb71-9"><a href="abcg.html#cb71-9" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;</span> v2<span class="op">(</span><span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span> <span class="co">// Inicializa v2 com 3 elementos de valor 2 (amb√≠guo)</span></span></code></pre></div>
<p>Compare com os exemplos abaixo <strong>com</strong> inicializa√ß√£o com <code>{}</code>:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb72-1"><a href="abcg.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a<span class="op">{};</span>    <span class="co">// Inicializa a com valor default (0)</span></span>
<span id="cb72-2"><a href="abcg.html#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> b<span class="op">{</span><span class="dv">42</span><span class="op">};</span>  <span class="co">// Inicializa b com 42</span></span>
<span id="cb72-3"><a href="abcg.html#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> c<span class="op">{};</span> <span class="co">// Inicializa c com valor default (0.0)</span></span>
<span id="cb72-4"><a href="abcg.html#cb72-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-5"><a href="abcg.html#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="co">// int d{7.9};                     // ERRO: convers√£o com estreitamento</span></span>
<span id="cb72-6"><a href="abcg.html#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> d<span class="op">{</span>gsl<span class="op">::</span>narrow_cast<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;(</span><span class="fl">7.9</span><span class="op">)};</span> <span class="co">// OK: convers√£o expl√≠cita de double para int</span></span>
<span id="cb72-7"><a href="abcg.html#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> pi<span class="op">{</span><span class="fl">3.1415</span><span class="bu">f</span><span class="op">};</span>                <span class="co">// OK: convers√£o impl√≠cita sem estreitamento</span></span>
<span id="cb72-8"><a href="abcg.html#cb72-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-9"><a href="abcg.html#cb72-9" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector<span class="op"> </span>v1<span class="op">{</span><span class="dv">3</span><span class="op">};</span>    <span class="co">// Inicializa v1 com um √∫nico elemento 3</span></span>
<span id="cb72-10"><a href="abcg.html#cb72-10" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector<span class="op"> </span>v2<span class="op">{</span><span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span> <span class="co">// Inicializa v2 com os elementos 3 e 2</span></span></code></pre></div>
<p>Observe que a inicializa√ß√£o com <code>{}</code> pro√≠be convers√µes impl√≠citas com estreitamento. A inicializa√ß√£o uniforme nos obriga a usar convers√µes expl√≠citas sempre que houver a possibilidade de perda de informa√ß√£o. Por um lado, isso deixa o c√≥digo mais verboso, como no uso do <code>gsl::narrow_cast</code> no exemplo anterior. Por outro lado, deixa evidente a inten√ß√£o do programador e evita bugs decorrentes de convers√µes impl√≠citas.</p>
</div>
<div id="palavra-chave-auto" class="section level4 unnumbered hasAnchor">
<h4>Palavra-chave <code>auto</code><a href="abcg.html#palavra-chave-auto" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A palavra-chave <code>auto</code> permite a dedu√ß√£o autom√°tica do tipo de uma vari√°vel a partir de sua inicializa√ß√£o. Usaremos <code>auto</code> sempre que poss√≠vel para evitar repeti√ß√µes redundantes de tipos de dados. Essa √© uma recomenda√ß√£o da diretiva <a href="https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#es11-use-auto-to-avoid-redundant-repetition-of-type-names">ES.11</a> do C++ Core Guidelines.</p>
<p>Alguns exemplos de uso de <code>auto</code> s√£o mostrados a seguir:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb73-1"><a href="abcg.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> a<span class="op">{</span><span class="dv">42</span><span class="op">};</span>      <span class="co">// int</span></span>
<span id="cb73-2"><a href="abcg.html#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> b<span class="op">{</span><span class="fl">7.9</span><span class="bu">f</span><span class="op">};</span>    <span class="co">// float</span></span>
<span id="cb73-3"><a href="abcg.html#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> c<span class="op">{</span><span class="fl">1.0</span> <span class="op">/</span> <span class="dv">3</span><span class="op">};</span> <span class="co">// double</span></span>
<span id="cb73-4"><a href="abcg.html#cb73-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-5"><a href="abcg.html#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="co">// Os exemplos a seguir funcionam com qualquer tipo de dado em v</span></span>
<span id="cb73-6"><a href="abcg.html#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector<span class="op"> </span>v<span class="op">{</span><span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb73-7"><a href="abcg.html#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> e<span class="op">{</span>v<span class="op">[</span><span class="dv">0</span><span class="op">]};</span>        <span class="co">// C√≥pia de v[0]</span></span>
<span id="cb73-8"><a href="abcg.html#cb73-8" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> <span class="op">&amp;</span>f<span class="op">{</span>v<span class="op">[</span><span class="dv">0</span><span class="op">]};</span>       <span class="co">// Refer√™ncia a v[0])</span></span>
<span id="cb73-9"><a href="abcg.html#cb73-9" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> <span class="at">const</span> <span class="op">&amp;</span>g<span class="op">{</span>v<span class="op">[</span><span class="dv">0</span><span class="op">]};</span> <span class="co">// Refer√™ncia apenas de leitura</span></span>
<span id="cb73-10"><a href="abcg.html#cb73-10" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> <span class="op">*</span>h<span class="op">{&amp;</span>v<span class="op">[</span><span class="dv">0</span><span class="op">]};</span>      <span class="co">// Ponteiro para v[0]</span></span>
<span id="cb73-11"><a href="abcg.html#cb73-11" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> it<span class="op">{</span>v<span class="op">.</span>begin<span class="op">()};</span>  <span class="co">// std::vector&lt;int&gt;::iterator</span></span>
<span id="cb73-12"><a href="abcg.html#cb73-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-13"><a href="abcg.html#cb73-13" aria-hidden="true" tabindex="-1"></a><span class="co">// Ponteiro inteligente</span></span>
<span id="cb73-14"><a href="abcg.html#cb73-14" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> p<span class="op">{</span><span class="bu">std::</span>make_unique<span class="op">&lt;</span><span class="dt">int</span><span class="op">[]&gt;(</span><span class="dv">1024</span><span class="op">)};</span> <span class="co">// std::unique_ptr&lt;int[]&gt;</span></span>
<span id="cb73-15"><a href="abcg.html#cb73-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-16"><a href="abcg.html#cb73-16" aria-hidden="true" tabindex="-1"></a><span class="co">// Express√£o lambda</span></span>
<span id="cb73-17"><a href="abcg.html#cb73-17" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> addTen<span class="op">{[](</span><span class="kw">auto</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> x <span class="op">+</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}};</span></span>
<span id="cb73-18"><a href="abcg.html#cb73-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-19"><a href="abcg.html#cb73-19" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> x<span class="op">{</span><span class="dv">0</span><span class="bu">U</span><span class="op">};</span>       <span class="co">// unsigned</span></span>
<span id="cb73-20"><a href="abcg.html#cb73-20" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> y<span class="op">{</span>addTen<span class="op">(</span>x<span class="op">)};</span> <span class="co">// unsigned</span></span></code></pre></div>

</div>
</div>
</div>
<!-- </div> -->
<div class="footnotes">
<hr />
<ol start="2">
<li id="fn2"><p>o PowerShell n√£o √© suportado! Use apenas o Prompt de Comando.<a href="abcg.html#fnref2" class="footnote-back">‚Ü©Ô∏é</a></p></li>
<li id="fn3"><p>Por exemplo, <code>gsl::narrow&lt;T&gt;(3.1415926535)</code> deve funcionar em uma plataforma em que <code>T</code> √© um ponto de flutuante de 48 bits (ex√≥tico, mas poss√≠vel), mas falha em um plataforma em que <code>T</code> tem 32 bits.<a href="abcg.html#fnref3" class="footnote-back">‚Ü©Ô∏é</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="vscode.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="intro.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"toc_float": true,
"toolbar": {
"position": "fixed"
},
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
