<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8.5 Efeito starfield | MCTA008-17 Computação Gráfica</title>
  <meta name="description" content="Notas de aula de MCTA008-17 Computação Gráfica da Universidade Federal do ABC" />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="8.5 Efeito starfield | MCTA008-17 Computação Gráfica" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Notas de aula de MCTA008-17 Computação Gráfica da Universidade Federal do ABC" />
  <meta name="github-repo" content="hbatagelo/cgbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8.5 Efeito starfield | MCTA008-17 Computação Gráfica" />
  
  <meta name="twitter:description" content="Notas de aula de MCTA008-17 Computação Gráfica da Universidade Federal do ABC" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="viewer1.html"/>
<link rel="next" href="lighting.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { font-weight: bold; } /* Alert */
code span.an { font-style: italic; } /* Annotation */
code span.cf { font-weight: bold; } /* ControlFlow */
code span.co { font-style: italic; } /* Comment */
code span.cv { font-style: italic; } /* CommentVar */
code span.do { font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.er { font-weight: bold; } /* Error */
code span.in { font-style: italic; } /* Information */
code span.kw { font-weight: bold; } /* Keyword */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.wa { font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Computação Gráfica</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Apresentação</a>
<ul>
<li class="chapter" data-level="" data-path="pré-requisitos.html"><a href="pré-requisitos.html"><i class="fa fa-check"></i>Pré-requisitos</a>
<ul>
<li class="chapter" data-level="" data-path="pré-requisitos.html"><a href="pré-requisitos.html#atividades-práticas"><i class="fa fa-check"></i>Atividades práticas</a></li>
<li class="chapter" data-level="" data-path="pré-requisitos.html"><a href="pré-requisitos.html#visualizando-este-site"><i class="fa fa-check"></i>Visualizando este site</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="config.html"><a href="config.html"><i class="fa fa-check"></i><b>1</b> Configuração do ambiente</a>
<ul>
<li class="chapter" data-level="1.1" data-path="linux.html"><a href="linux.html"><i class="fa fa-check"></i><b>1.1</b> Linux</a>
<ul>
<li class="chapter" data-level="" data-path="linux.html"><a href="linux.html#verificando-o-opengl"><i class="fa fa-check"></i>Verificando o OpenGL</a></li>
<li class="chapter" data-level="" data-path="linux.html"><a href="linux.html#atualizando-o-gcc"><i class="fa fa-check"></i>Atualizando o GCC</a></li>
<li class="chapter" data-level="" data-path="linux.html"><a href="linux.html#instalando-o-emscripten"><i class="fa fa-check"></i>Instalando o Emscripten</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="macos.html"><a href="macos.html"><i class="fa fa-check"></i><b>1.2</b> macOS</a>
<ul>
<li class="chapter" data-level="" data-path="macos.html"><a href="macos.html#instalando-o-emscripten-1"><i class="fa fa-check"></i>Instalando o Emscripten</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="windows.html"><a href="windows.html"><i class="fa fa-check"></i><b>1.3</b> Windows</a>
<ul>
<li class="chapter" data-level="" data-path="windows.html"><a href="windows.html#verificando-o-opengl-1"><i class="fa fa-check"></i>Verificando o OpenGL</a></li>
<li class="chapter" data-level="" data-path="windows.html"><a href="windows.html#instalando-o-emscripten-2"><i class="fa fa-check"></i>Instalando o Emscripten</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="vscode.html"><a href="vscode.html"><i class="fa fa-check"></i><b>1.4</b> Visual Studio Code</a></li>
<li class="chapter" data-level="1.5" data-path="abcg.html"><a href="abcg.html"><i class="fa fa-check"></i><b>1.5</b> ABCg</a>
<ul>
<li class="chapter" data-level="" data-path="abcg.html"><a href="abcg.html#instalação"><i class="fa fa-check"></i>Instalação</a></li>
<li class="chapter" data-level="" data-path="abcg.html"><a href="abcg.html#compilando-na-linha-de-comando"><i class="fa fa-check"></i>Compilando na linha de comando</a></li>
<li class="chapter" data-level="" data-path="abcg.html"><a href="abcg.html#compilando-no-vs-code"><i class="fa fa-check"></i>Compilando no VS Code</a></li>
<li class="chapter" data-level="" data-path="abcg.html"><a href="abcg.html#depurando-no-vs-code"><i class="fa fa-check"></i>Depurando no VS Code</a></li>
<li class="chapter" data-level="" data-path="abcg.html"><a href="abcg.html#compilando-para-wasm"><i class="fa fa-check"></i>Compilando para WASM</a></li>
<li class="chapter" data-level="" data-path="abcg.html"><a href="abcg.html#revisão-de-c"><i class="fa fa-check"></i>Revisão de C++</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introdução</a>
<ul>
<li class="chapter" data-level="2.1" data-path="áreas-correlatas.html"><a href="áreas-correlatas.html"><i class="fa fa-check"></i><b>2.1</b> Áreas correlatas</a></li>
<li class="chapter" data-level="2.2" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html"><i class="fa fa-check"></i><b>2.2</b> Linha do tempo</a>
<ul>
<li class="chapter" data-level="" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html#section"><i class="fa fa-check"></i>1950</a></li>
<li class="chapter" data-level="" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html#section-1"><i class="fa fa-check"></i>1960</a></li>
<li class="chapter" data-level="" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html#section-2"><i class="fa fa-check"></i>1970</a></li>
<li class="chapter" data-level="" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html#section-3"><i class="fa fa-check"></i>1980</a></li>
<li class="chapter" data-level="" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html#section-4"><i class="fa fa-check"></i>1990</a></li>
<li class="chapter" data-level="" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html#section-5"><i class="fa fa-check"></i>2000</a></li>
<li class="chapter" data-level="" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html#section-6"><i class="fa fa-check"></i>2010</a></li>
<li class="chapter" data-level="" data-path="linha-do-tempo.html"><a href="linha-do-tempo.html#section-7"><i class="fa fa-check"></i>2020</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="firstapp.html"><a href="firstapp.html"><i class="fa fa-check"></i><b>2.3</b> Primeiro programa</a>
<ul>
<li class="chapter" data-level="" data-path="firstapp.html"><a href="firstapp.html#configuração-inicial"><i class="fa fa-check"></i>Configuração inicial</a></li>
<li class="chapter" data-level="" data-path="firstapp.html"><a href="firstapp.html#main.cpp"><i class="fa fa-check"></i>main.cpp</a></li>
<li class="chapter" data-level="" data-path="firstapp.html"><a href="firstapp.html#window.hpp"><i class="fa fa-check"></i>window.hpp</a></li>
<li class="chapter" data-level="" data-path="firstapp.html"><a href="firstapp.html#window.cpp"><i class="fa fa-check"></i>window.cpp</a></li>
<li class="chapter" data-level="" data-path="firstapp.html"><a href="firstapp.html#compilando-para-webassembly"><i class="fa fa-check"></i>Compilando para WebAssembly</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="tictactoe.html"><a href="tictactoe.html"><i class="fa fa-check"></i><b>2.4</b> Jogo da Velha</a>
<ul>
<li class="chapter" data-level="" data-path="tictactoe.html"><a href="tictactoe.html#configuração-inicial-1"><i class="fa fa-check"></i>Configuração inicial</a></li>
<li class="chapter" data-level="" data-path="tictactoe.html"><a href="tictactoe.html#main.cpp-1"><i class="fa fa-check"></i>main.cpp</a></li>
<li class="chapter" data-level="" data-path="tictactoe.html"><a href="tictactoe.html#window.hpp-1"><i class="fa fa-check"></i>window.hpp</a></li>
<li class="chapter" data-level="" data-path="tictactoe.html"><a href="tictactoe.html#window.cpp-1"><i class="fa fa-check"></i>window.cpp</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="graphicssystem.html"><a href="graphicssystem.html"><i class="fa fa-check"></i><b>3</b> Sistemas gráficos</a>
<ul>
<li class="chapter" data-level="3.1" data-path="lightcolor.html"><a href="lightcolor.html"><i class="fa fa-check"></i><b>3.1</b> Luz e cor</a>
<ul>
<li class="chapter" data-level="" data-path="lightcolor.html"><a href="lightcolor.html#visão-tricromática"><i class="fa fa-check"></i>Visão tricromática</a></li>
<li class="chapter" data-level="" data-path="lightcolor.html"><a href="lightcolor.html#modelos-de-cor"><i class="fa fa-check"></i>Modelos de cor</a></li>
<li class="chapter" data-level="" data-path="lightcolor.html"><a href="lightcolor.html#sistema-cie-1931"><i class="fa fa-check"></i>Sistema CIE 1931</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="vectorxraster.html"><a href="vectorxraster.html"><i class="fa fa-check"></i><b>3.2</b> Vetorial <em>x</em> matricial</a>
<ul>
<li class="chapter" data-level="" data-path="vectorxraster.html"><a href="vectorxraster.html#representação-vetorial"><i class="fa fa-check"></i>Representação vetorial</a></li>
<li class="chapter" data-level="" data-path="vectorxraster.html"><a href="vectorxraster.html#representação-matricial"><i class="fa fa-check"></i>Representação matricial</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="es.html"><a href="es.html"><i class="fa fa-check"></i><b>3.3</b> Dispositivos de E/S</a>
<ul>
<li class="chapter" data-level="" data-path="es.html"><a href="es.html#dispositivos-de-entrada"><i class="fa fa-check"></i>Dispositivos de entrada</a></li>
<li class="chapter" data-level="" data-path="es.html"><a href="es.html#dispositivos-de-saída"><i class="fa fa-check"></i>Dispositivos de saída</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="framebuffer.html"><a href="framebuffer.html"><i class="fa fa-check"></i><b>3.4</b> Framebuffer</a>
<ul>
<li class="chapter" data-level="" data-path="framebuffer.html"><a href="framebuffer.html#screen-tearing"><i class="fa fa-check"></i>Screen tearing</a></li>
<li class="chapter" data-level="" data-path="framebuffer.html"><a href="framebuffer.html#vsync"><i class="fa fa-check"></i>Vsync</a></li>
<li class="chapter" data-level="" data-path="framebuffer.html"><a href="framebuffer.html#multiple-buffering"><i class="fa fa-check"></i>Multiple buffering</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="sierpinski.html"><a href="sierpinski.html"><i class="fa fa-check"></i><b>3.5</b> Triângulo de Sierpinski</a>
<ul>
<li class="chapter" data-level="" data-path="sierpinski.html"><a href="sierpinski.html#configuração-inicial-2"><i class="fa fa-check"></i>Configuração inicial</a></li>
<li class="chapter" data-level="" data-path="sierpinski.html"><a href="sierpinski.html#main.cpp-2"><i class="fa fa-check"></i>main.cpp</a></li>
<li class="chapter" data-level="" data-path="sierpinski.html"><a href="sierpinski.html#window.hpp-2"><i class="fa fa-check"></i>window.hpp</a></li>
<li class="chapter" data-level="" data-path="sierpinski.html"><a href="sierpinski.html#window.cpp-2"><i class="fa fa-check"></i>window.cpp</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="pipeline.html"><a href="pipeline.html"><i class="fa fa-check"></i><b>4</b> Pipeline gráfico</a>
<ul>
<li class="chapter" data-level="4.1" data-path="dados-gráficos.html"><a href="dados-gráficos.html"><i class="fa fa-check"></i><b>4.1</b> Dados gráficos</a></li>
<li class="chapter" data-level="4.2" data-path="ray-casting-x-rasterização.html"><a href="ray-casting-x-rasterização.html"><i class="fa fa-check"></i><b>4.2</b> Ray casting <em>x</em> rasterização</a>
<ul>
<li class="chapter" data-level="" data-path="ray-casting-x-rasterização.html"><a href="ray-casting-x-rasterização.html#ray-casting"><i class="fa fa-check"></i>Ray casting</a></li>
<li class="chapter" data-level="" data-path="ray-casting-x-rasterização.html"><a href="ray-casting-x-rasterização.html#rasterização"><i class="fa fa-check"></i>Rasterização</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="glpipeline.html"><a href="glpipeline.html"><i class="fa fa-check"></i><b>4.3</b> Pipeline do OpenGL</a>
<ul>
<li class="chapter" data-level="" data-path="glpipeline.html"><a href="glpipeline.html#aplicação"><i class="fa fa-check"></i>Aplicação</a></li>
<li class="chapter" data-level="" data-path="glpipeline.html"><a href="glpipeline.html#vertex-shader"><i class="fa fa-check"></i>Vertex shader</a></li>
<li class="chapter" data-level="" data-path="glpipeline.html"><a href="glpipeline.html#montagem-de-primitivas"><i class="fa fa-check"></i>Montagem de primitivas</a></li>
<li class="chapter" data-level="" data-path="glpipeline.html"><a href="glpipeline.html#recorte"><i class="fa fa-check"></i>Recorte</a></li>
<li class="chapter" data-level="" data-path="glpipeline.html"><a href="glpipeline.html#rasterização-1"><i class="fa fa-check"></i>Rasterização</a></li>
<li class="chapter" data-level="" data-path="glpipeline.html"><a href="glpipeline.html#fragment-shader"><i class="fa fa-check"></i>Fragment shader</a></li>
<li class="chapter" data-level="" data-path="glpipeline.html"><a href="glpipeline.html#operações-de-fragmentos"><i class="fa fa-check"></i>Operações de fragmentos</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="coloredtriangles.html"><a href="coloredtriangles.html"><i class="fa fa-check"></i><b>4.4</b> Triângulos coloridos</a>
<ul>
<li class="chapter" data-level="" data-path="coloredtriangles.html"><a href="coloredtriangles.html#configuração-inicial-3"><i class="fa fa-check"></i>Configuração inicial</a></li>
<li class="chapter" data-level="" data-path="coloredtriangles.html"><a href="coloredtriangles.html#main.cpp-3"><i class="fa fa-check"></i>main.cpp</a></li>
<li class="chapter" data-level="" data-path="coloredtriangles.html"><a href="coloredtriangles.html#window.hpp-3"><i class="fa fa-check"></i>window.hpp</a></li>
<li class="chapter" data-level="" data-path="coloredtriangles.html"><a href="coloredtriangles.html#window.cpp-3"><i class="fa fa-check"></i>window.cpp</a></li>
<li class="chapter" data-level="" data-path="coloredtriangles.html"><a href="coloredtriangles.html#ajustando-a-taxa-de-atualização"><i class="fa fa-check"></i>Ajustando a taxa de atualização</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="game.html"><a href="game.html"><i class="fa fa-check"></i><b>5</b> Desenvolvendo um jogo 2D</a>
<ul>
<li class="chapter" data-level="5.1" data-path="regularpolygons.html"><a href="regularpolygons.html"><i class="fa fa-check"></i><b>5.1</b> Polígonos regulares</a>
<ul>
<li class="chapter" data-level="" data-path="regularpolygons.html"><a href="regularpolygons.html#configuração-inicial-4"><i class="fa fa-check"></i>Configuração inicial</a></li>
<li class="chapter" data-level="" data-path="regularpolygons.html"><a href="regularpolygons.html#main.cpp-4"><i class="fa fa-check"></i>main.cpp</a></li>
<li class="chapter" data-level="" data-path="regularpolygons.html"><a href="regularpolygons.html#window.hpp-4"><i class="fa fa-check"></i>window.hpp</a></li>
<li class="chapter" data-level="" data-path="regularpolygons.html"><a href="regularpolygons.html#window.cpp-4"><i class="fa fa-check"></i>window.cpp</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="asteroids.html"><a href="asteroids.html"><i class="fa fa-check"></i><b>5.2</b> Asteroids</a>
<ul>
<li class="chapter" data-level="" data-path="asteroids.html"><a href="asteroids.html#organização-do-projeto"><i class="fa fa-check"></i>Organização do projeto</a></li>
<li class="chapter" data-level="" data-path="asteroids.html"><a href="asteroids.html#configuração-inicial-5"><i class="fa fa-check"></i>Configuração inicial</a></li>
<li class="chapter" data-level="" data-path="asteroids.html"><a href="asteroids.html#nave"><i class="fa fa-check"></i>Nave</a></li>
<li class="chapter" data-level="" data-path="asteroids.html"><a href="asteroids.html#estrelas"><i class="fa fa-check"></i>Estrelas</a></li>
<li class="chapter" data-level="" data-path="asteroids.html"><a href="asteroids.html#asteroides"><i class="fa fa-check"></i>Asteroides</a></li>
<li class="chapter" data-level="" data-path="asteroids.html"><a href="asteroids.html#tiros-e-colisões"><i class="fa fa-check"></i>Tiros e colisões</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="geometry.html"><a href="geometry.html"><i class="fa fa-check"></i><b>6</b> Espaços e geometria</a>
<ul>
<li class="chapter" data-level="6.1" data-path="vector.html"><a href="vector.html"><i class="fa fa-check"></i><b>6.1</b> Espaço vetorial</a>
<ul>
<li class="chapter" data-level="" data-path="vector.html"><a href="vector.html#combinação-e-independência-linear"><i class="fa fa-check"></i>Combinação e independência linear</a></li>
<li class="chapter" data-level="" data-path="vector.html"><a href="vector.html#dimensão-e-base"><i class="fa fa-check"></i>Dimensão e base</a></li>
<li class="chapter" data-level="" data-path="vector.html"><a href="vector.html#vetores-geométricos"><i class="fa fa-check"></i>Vetores geométricos</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="affine.html"><a href="affine.html"><i class="fa fa-check"></i><b>6.2</b> Espaço afim</a>
<ul>
<li class="chapter" data-level="" data-path="affine.html"><a href="affine.html#combinação-afim"><i class="fa fa-check"></i>Combinação afim</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="euclidean.html"><a href="euclidean.html"><i class="fa fa-check"></i><b>6.3</b> Espaço euclidiano</a>
<ul>
<li class="chapter" data-level="" data-path="euclidean.html"><a href="euclidean.html#quadro-de-referência"><i class="fa fa-check"></i>Quadro de referência</a></li>
<li class="chapter" data-level="" data-path="euclidean.html"><a href="euclidean.html#produto-escalar"><i class="fa fa-check"></i>Produto escalar</a></li>
<li class="chapter" data-level="" data-path="euclidean.html"><a href="euclidean.html#ortogonalidade"><i class="fa fa-check"></i>Ortogonalidade</a></li>
<li class="chapter" data-level="" data-path="euclidean.html"><a href="euclidean.html#comprimento-e-distância"><i class="fa fa-check"></i>Comprimento e distância</a></li>
<li class="chapter" data-level="" data-path="euclidean.html"><a href="euclidean.html#normalização"><i class="fa fa-check"></i>Normalização</a></li>
<li class="chapter" data-level="" data-path="euclidean.html"><a href="euclidean.html#ângulo-entre-vetores"><i class="fa fa-check"></i>Ângulo entre vetores</a></li>
<li class="chapter" data-level="" data-path="euclidean.html"><a href="euclidean.html#projeção-ortogonal"><i class="fa fa-check"></i>Projeção ortogonal</a></li>
<li class="chapter" data-level="" data-path="euclidean.html"><a href="euclidean.html#produto-vetorial"><i class="fa fa-check"></i>Produto vetorial</a></li>
<li class="chapter" data-level="" data-path="euclidean.html"><a href="euclidean.html#vetor-normal"><i class="fa fa-check"></i>Vetor normal</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="objmodel.html"><a href="objmodel.html"><i class="fa fa-check"></i><b>6.4</b> Lendo um modelo 3D</a>
<ul>
<li class="chapter" data-level="" data-path="objmodel.html"><a href="objmodel.html#orientação-e-face-culling"><i class="fa fa-check"></i>Orientação e face culling</a></li>
<li class="chapter" data-level="" data-path="objmodel.html"><a href="objmodel.html#configuração-inicial-6"><i class="fa fa-check"></i>Configuração inicial</a></li>
<li class="chapter" data-level="" data-path="objmodel.html"><a href="objmodel.html#main.cpp-6"><i class="fa fa-check"></i>main.cpp</a></li>
<li class="chapter" data-level="" data-path="objmodel.html"><a href="objmodel.html#loadmodel.vert"><i class="fa fa-check"></i>loadmodel.vert</a></li>
<li class="chapter" data-level="" data-path="objmodel.html"><a href="objmodel.html#loadmodel.frag"><i class="fa fa-check"></i>loadmodel.frag</a></li>
<li class="chapter" data-level="" data-path="objmodel.html"><a href="objmodel.html#window.hpp-6"><i class="fa fa-check"></i>window.hpp</a></li>
<li class="chapter" data-level="" data-path="objmodel.html"><a href="objmodel.html#window.cpp-6"><i class="fa fa-check"></i>window.cpp</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="transformations.html"><a href="transformations.html"><i class="fa fa-check"></i><b>7</b> Matrizes e transformações</a>
<ul>
<li class="chapter" data-level="7.1" data-path="matrix.html"><a href="matrix.html"><i class="fa fa-check"></i><b>7.1</b> Matrizes</a>
<ul>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#matriz-transposta"><i class="fa fa-check"></i>Matriz transposta</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#matriz-quadrada"><i class="fa fa-check"></i>Matriz quadrada</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#matriz-linhacoluna"><i class="fa fa-check"></i>Matriz linha/coluna</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#matriz-identidade"><i class="fa fa-check"></i>Matriz identidade</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#operações"><i class="fa fa-check"></i>Operações</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#matriz-inversa"><i class="fa fa-check"></i>Matriz inversa</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#matriz-ortogonal"><i class="fa fa-check"></i>Matriz ortogonal</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#propriedades"><i class="fa fa-check"></i>Propriedades</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#transformação-linear"><i class="fa fa-check"></i>Transformação linear</a></li>
<li class="chapter" data-level="" data-path="matrix.html"><a href="matrix.html#mudança-de-base"><i class="fa fa-check"></i>Mudança de base</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="homogeneous.html"><a href="homogeneous.html"><i class="fa fa-check"></i><b>7.2</b> Coordenadas homogêneas</a></li>
<li class="chapter" data-level="7.3" data-path="concat.html"><a href="concat.html"><i class="fa fa-check"></i><b>7.3</b> Concatenação de transformações</a></li>
<li class="chapter" data-level="7.4" data-path="transforms.html"><a href="transforms.html"><i class="fa fa-check"></i><b>7.4</b> Transformações</a>
<ul>
<li class="chapter" data-level="" data-path="transforms.html"><a href="transforms.html#identidade"><i class="fa fa-check"></i>Identidade</a></li>
<li class="chapter" data-level="" data-path="transforms.html"><a href="transforms.html#translação"><i class="fa fa-check"></i>Translação</a></li>
<li class="chapter" data-level="" data-path="transforms.html"><a href="transforms.html#escala"><i class="fa fa-check"></i>Escala</a></li>
<li class="chapter" data-level="" data-path="transforms.html"><a href="transforms.html#rotação"><i class="fa fa-check"></i>Rotação</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="glspaces.html"><a href="glspaces.html"><i class="fa fa-check"></i><b>7.5</b> Espaços do OpenGL</a>
<ul>
<li class="chapter" data-level="" data-path="glspaces.html"><a href="glspaces.html#espaço-do-objeto"><i class="fa fa-check"></i>Espaço do objeto</a></li>
<li class="chapter" data-level="" data-path="glspaces.html"><a href="glspaces.html#espaço-do-mundo"><i class="fa fa-check"></i>Espaço do mundo</a></li>
<li class="chapter" data-level="" data-path="glspaces.html"><a href="glspaces.html#espaço-da-câmera"><i class="fa fa-check"></i>Espaço da câmera</a></li>
<li class="chapter" data-level="" data-path="glspaces.html"><a href="glspaces.html#concatenação-das-matrizes-de-modelo-e-visão"><i class="fa fa-check"></i>Concatenação das matrizes de modelo e visão</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="lookat.html"><a href="lookat.html"><i class="fa fa-check"></i><b>7.6</b> Câmera LookAt</a>
<ul>
<li class="chapter" data-level="" data-path="lookat.html"><a href="lookat.html#construindo-o-vetor-n"><i class="fa fa-check"></i>Construindo o vetor n</a></li>
<li class="chapter" data-level="" data-path="lookat.html"><a href="lookat.html#construindo-o-vetor-u"><i class="fa fa-check"></i>Construindo o vetor u</a></li>
<li class="chapter" data-level="" data-path="lookat.html"><a href="lookat.html#construindo-o-vetor-v"><i class="fa fa-check"></i>Construindo o vetor v</a></li>
<li class="chapter" data-level="" data-path="lookat.html"><a href="lookat.html#construindo-a-matriz-de-visão"><i class="fa fa-check"></i>Construindo a matriz de visão</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="lookatproject.html"><a href="lookatproject.html"><i class="fa fa-check"></i><b>7.7</b> LookAt na prática</a>
<ul>
<li class="chapter" data-level="" data-path="lookatproject.html"><a href="lookatproject.html#configuração-inicial-7"><i class="fa fa-check"></i>Configuração inicial</a></li>
<li class="chapter" data-level="" data-path="lookatproject.html"><a href="lookatproject.html#main.cpp-7"><i class="fa fa-check"></i>main.cpp</a></li>
<li class="chapter" data-level="" data-path="lookatproject.html"><a href="lookatproject.html#lookat.vert"><i class="fa fa-check"></i>lookat.vert</a></li>
<li class="chapter" data-level="" data-path="lookatproject.html"><a href="lookatproject.html#lookat.frag"><i class="fa fa-check"></i>lookat.frag</a></li>
<li class="chapter" data-level="" data-path="lookatproject.html"><a href="lookatproject.html#camera.hpp"><i class="fa fa-check"></i>camera.hpp</a></li>
<li class="chapter" data-level="" data-path="lookatproject.html"><a href="lookatproject.html#camera.cpp"><i class="fa fa-check"></i>camera.cpp</a></li>
<li class="chapter" data-level="" data-path="lookatproject.html"><a href="lookatproject.html#window.hpp-7"><i class="fa fa-check"></i>window.hpp</a></li>
<li class="chapter" data-level="" data-path="lookatproject.html"><a href="lookatproject.html#window.cpp-7"><i class="fa fa-check"></i>window.cpp</a></li>
<li class="chapter" data-level="" data-path="lookatproject.html"><a href="lookatproject.html#ground.hpp"><i class="fa fa-check"></i>ground.hpp</a></li>
<li class="chapter" data-level="" data-path="lookatproject.html"><a href="lookatproject.html#ground.cpp"><i class="fa fa-check"></i>ground.cpp</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="projections.html"><a href="projections.html"><i class="fa fa-check"></i><b>8</b> Projeções e trackball virtual</a>
<ul>
<li class="chapter" data-level="8.1" data-path="ortho.html"><a href="ortho.html"><i class="fa fa-check"></i><b>8.1</b> Projeção ortográfica</a>
<ul>
<li class="chapter" data-level="" data-path="ortho.html"><a href="ortho.html#translação-1"><i class="fa fa-check"></i>Translação</a></li>
<li class="chapter" data-level="" data-path="ortho.html"><a href="ortho.html#escala-e-reflexão"><i class="fa fa-check"></i>Escala e reflexão</a></li>
<li class="chapter" data-level="" data-path="ortho.html"><a href="ortho.html#matriz-de-projeção"><i class="fa fa-check"></i>Matriz de projeção</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="perspective.html"><a href="perspective.html"><i class="fa fa-check"></i><b>8.2</b> Projeção perspectiva</a>
<ul>
<li class="chapter" data-level="" data-path="perspective.html"><a href="perspective.html#matriz-de-projeção-1"><i class="fa fa-check"></i>Matriz de projeção</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="vtrackball1.html"><a href="vtrackball1.html"><i class="fa fa-check"></i><b>8.3</b> Trackball virtual</a>
<ul>
<li class="chapter" data-level="" data-path="vtrackball1.html"><a href="vtrackball1.html#rotação-em-torno-de-um-eixo-arbitrário"><i class="fa fa-check"></i>Rotação em torno de um eixo arbitrário</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="viewer1.html"><a href="viewer1.html"><i class="fa fa-check"></i><b>8.4</b> Visualizador 3D</a>
<ul>
<li class="chapter" data-level="" data-path="viewer1.html"><a href="viewer1.html#configuração-inicial-8"><i class="fa fa-check"></i>Configuração inicial</a></li>
<li class="chapter" data-level="" data-path="viewer1.html"><a href="viewer1.html#main.cpp-8"><i class="fa fa-check"></i>main.cpp</a></li>
<li class="chapter" data-level="" data-path="viewer1.html"><a href="viewer1.html#depth.vert"><i class="fa fa-check"></i>depth.vert</a></li>
<li class="chapter" data-level="" data-path="viewer1.html"><a href="viewer1.html#depth.frag"><i class="fa fa-check"></i>depth.frag</a></li>
<li class="chapter" data-level="" data-path="viewer1.html"><a href="viewer1.html#model.hpp"><i class="fa fa-check"></i>model.hpp</a></li>
<li class="chapter" data-level="" data-path="viewer1.html"><a href="viewer1.html#model.cpp"><i class="fa fa-check"></i>model.cpp</a></li>
<li class="chapter" data-level="" data-path="viewer1.html"><a href="viewer1.html#trackball.hpp"><i class="fa fa-check"></i>trackball.hpp</a></li>
<li class="chapter" data-level="" data-path="viewer1.html"><a href="viewer1.html#trackball.cpp"><i class="fa fa-check"></i>trackball.cpp</a></li>
<li class="chapter" data-level="" data-path="viewer1.html"><a href="viewer1.html#window.hpp-8"><i class="fa fa-check"></i>window.hpp</a></li>
<li class="chapter" data-level="" data-path="viewer1.html"><a href="viewer1.html#window.cpp-8"><i class="fa fa-check"></i>window.cpp</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="starfield.html"><a href="starfield.html"><i class="fa fa-check"></i><b>8.5</b> Efeito starfield</a>
<ul>
<li class="chapter" data-level="" data-path="starfield.html"><a href="starfield.html#configuração-inicial-9"><i class="fa fa-check"></i>Configuração inicial</a></li>
<li class="chapter" data-level="" data-path="starfield.html"><a href="starfield.html#main.cpp-9"><i class="fa fa-check"></i>main.cpp</a></li>
<li class="chapter" data-level="" data-path="starfield.html"><a href="starfield.html#depth.vert-1"><i class="fa fa-check"></i>depth.vert</a></li>
<li class="chapter" data-level="" data-path="starfield.html"><a href="starfield.html#depth.frag-1"><i class="fa fa-check"></i>depth.frag</a></li>
<li class="chapter" data-level="" data-path="starfield.html"><a href="starfield.html#window.hpp-9"><i class="fa fa-check"></i>window.hpp</a></li>
<li class="chapter" data-level="" data-path="starfield.html"><a href="starfield.html#window.cpp-9"><i class="fa fa-check"></i>window.cpp</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="lighting.html"><a href="lighting.html"><i class="fa fa-check"></i><b>9</b> Iluminação</a>
<ul>
<li class="chapter" data-level="9.1" data-path="renderingequation.html"><a href="renderingequation.html"><i class="fa fa-check"></i><b>9.1</b> Equação de renderização</a></li>
<li class="chapter" data-level="9.2" data-path="phongmodel.html"><a href="phongmodel.html"><i class="fa fa-check"></i><b>9.2</b> Modelo de reflexão de Phong</a>
<ul>
<li class="chapter" data-level="" data-path="phongmodel.html"><a href="phongmodel.html#reflexão-ambiente"><i class="fa fa-check"></i>Reflexão ambiente</a></li>
<li class="chapter" data-level="" data-path="phongmodel.html"><a href="phongmodel.html#reflexão-difusa"><i class="fa fa-check"></i>Reflexão difusa</a></li>
<li class="chapter" data-level="" data-path="phongmodel.html"><a href="phongmodel.html#reflexão-especular"><i class="fa fa-check"></i>Reflexão especular</a></li>
<li class="chapter" data-level="" data-path="phongmodel.html"><a href="phongmodel.html#modelo-completo"><i class="fa fa-check"></i>Modelo completo</a></li>
<li class="chapter" data-level="" data-path="phongmodel.html"><a href="phongmodel.html#iluminação-colorida"><i class="fa fa-check"></i>Iluminação colorida</a></li>
<li class="chapter" data-level="" data-path="phongmodel.html"><a href="phongmodel.html#fontes-de-luz"><i class="fa fa-check"></i>Fontes de luz</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="blinnphongmodel.html"><a href="blinnphongmodel.html"><i class="fa fa-check"></i><b>9.3</b> Modelo de Blinn–Phong</a></li>
<li class="chapter" data-level="9.4" data-path="shading.html"><a href="shading.html"><i class="fa fa-check"></i><b>9.4</b> Sombreamento</a>
<ul>
<li class="chapter" data-level="" data-path="shading.html"><a href="shading.html#flat"><i class="fa fa-check"></i>Flat</a></li>
<li class="chapter" data-level="" data-path="shading.html"><a href="shading.html#gouraud"><i class="fa fa-check"></i>Gouraud</a></li>
<li class="chapter" data-level="" data-path="shading.html"><a href="shading.html#phong"><i class="fa fa-check"></i>Phong</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="viewer2.html"><a href="viewer2.html"><i class="fa fa-check"></i><b>9.5</b> Normais como cores</a>
<ul>
<li class="chapter" data-level="" data-path="viewer2.html"><a href="viewer2.html#configuração-inicial-10"><i class="fa fa-check"></i>Configuração inicial</a></li>
<li class="chapter" data-level="" data-path="viewer2.html"><a href="viewer2.html#model.hpp-1"><i class="fa fa-check"></i>model.hpp</a></li>
<li class="chapter" data-level="" data-path="viewer2.html"><a href="viewer2.html#model.cpp-1"><i class="fa fa-check"></i>model.cpp</a></li>
<li class="chapter" data-level="" data-path="viewer2.html"><a href="viewer2.html#window.hpp-10"><i class="fa fa-check"></i>window.hpp</a></li>
<li class="chapter" data-level="" data-path="viewer2.html"><a href="viewer2.html#window.cpp-10"><i class="fa fa-check"></i>window.cpp</a></li>
<li class="chapter" data-level="" data-path="viewer2.html"><a href="viewer2.html#depth.vert-2"><i class="fa fa-check"></i>depth.vert</a></li>
<li class="chapter" data-level="" data-path="viewer2.html"><a href="viewer2.html#normal.frag"><i class="fa fa-check"></i>normal.frag</a></li>
<li class="chapter" data-level="" data-path="viewer2.html"><a href="viewer2.html#normal.vert"><i class="fa fa-check"></i>normal.vert</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="viewer3.html"><a href="viewer3.html"><i class="fa fa-check"></i><b>9.6</b> Iluminação na prática</a>
<ul>
<li class="chapter" data-level="" data-path="viewer3.html"><a href="viewer3.html#phong-com-sombreamento-de-gouraud"><i class="fa fa-check"></i>Phong com sombreamento de Gouraud</a></li>
<li class="chapter" data-level="" data-path="viewer3.html"><a href="viewer3.html#phong-com-sombreamento-de-phong"><i class="fa fa-check"></i>Phong com sombreamento de Phong</a></li>
<li class="chapter" data-level="" data-path="viewer3.html"><a href="viewer3.html#blinn-phong-com-sombreamento-de-phong"><i class="fa fa-check"></i>Blinn-Phong com sombreamento de Phong</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="texturing.html"><a href="texturing.html"><i class="fa fa-check"></i><b>10</b> Texturização</a>
<ul>
<li class="chapter" data-level="10.1" data-path="texmapping.html"><a href="texmapping.html"><i class="fa fa-check"></i><b>10.1</b> Mapeamento</a>
<ul>
<li class="chapter" data-level="" data-path="texmapping.html"><a href="texmapping.html#mapeamento-planar"><i class="fa fa-check"></i>Mapeamento planar</a></li>
<li class="chapter" data-level="" data-path="texmapping.html"><a href="texmapping.html#mapeamento-cilíndrico"><i class="fa fa-check"></i>Mapeamento cilíndrico</a></li>
<li class="chapter" data-level="" data-path="texmapping.html"><a href="texmapping.html#mapeamento-esférico"><i class="fa fa-check"></i>Mapeamento esférico</a></li>
<li class="chapter" data-level="" data-path="texmapping.html"><a href="texmapping.html#mapeamento-uv-unwrap"><i class="fa fa-check"></i>Mapeamento UV unwrap</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="texwrapping.html"><a href="texwrapping.html"><i class="fa fa-check"></i><b>10.2</b> Empacotamento</a></li>
<li class="chapter" data-level="10.3" data-path="texfiltering.html"><a href="texfiltering.html"><i class="fa fa-check"></i><b>10.3</b> Filtragem</a>
<ul>
<li class="chapter" data-level="" data-path="texfiltering.html"><a href="texfiltering.html#magnificação"><i class="fa fa-check"></i>Magnificação</a></li>
<li class="chapter" data-level="" data-path="texfiltering.html"><a href="texfiltering.html#minificação"><i class="fa fa-check"></i>Minificação</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="viewer4.html"><a href="viewer4.html"><i class="fa fa-check"></i><b>10.4</b> Texturização na prática</a>
<ul>
<li class="chapter" data-level="" data-path="viewer4.html"><a href="viewer4.html#carregando-texturas"><i class="fa fa-check"></i>Carregando texturas</a></li>
<li class="chapter" data-level="" data-path="viewer4.html"><a href="viewer4.html#carregando-modelos-com-textura"><i class="fa fa-check"></i>Carregando modelos com textura</a></li>
<li class="chapter" data-level="" data-path="viewer4.html"><a href="viewer4.html#renderizando"><i class="fa fa-check"></i>Renderizando</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="normalmapping.html"><a href="normalmapping.html"><i class="fa fa-check"></i><b>10.5</b> Mapeamento de normais</a>
<ul>
<li class="chapter" data-level="" data-path="normalmapping.html"><a href="normalmapping.html#espaço-tangente"><i class="fa fa-check"></i>Espaço tangente</a></li>
<li class="chapter" data-level="" data-path="normalmapping.html"><a href="normalmapping.html#transformação-para-o-espaço-tangente"><i class="fa fa-check"></i>Transformação para o espaço tangente</a></li>
<li class="chapter" data-level="" data-path="normalmapping.html"><a href="normalmapping.html#vetor-tangente-e-bitangente"><i class="fa fa-check"></i>Vetor tangente e bitangente</a></li>
<li class="chapter" data-level="" data-path="normalmapping.html"><a href="normalmapping.html#mapeamento-de-normais-na-prática"><i class="fa fa-check"></i>Mapeamento de normais na prática</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="envmapping.html"><a href="envmapping.html"><i class="fa fa-check"></i><b>10.6</b> Mapeamento de ambiente</a>
<ul>
<li class="chapter" data-level="" data-path="envmapping.html"><a href="envmapping.html#mapeamento-de-ambiente-esférico"><i class="fa fa-check"></i>Mapeamento de ambiente esférico</a></li>
<li class="chapter" data-level="" data-path="envmapping.html"><a href="envmapping.html#mapeamento-de-ambiente-equiretangular"><i class="fa fa-check"></i>Mapeamento de ambiente equiretangular</a></li>
<li class="chapter" data-level="" data-path="envmapping.html"><a href="envmapping.html#mapeamento-de-ambiente-cúbico"><i class="fa fa-check"></i>Mapeamento de ambiente cúbico</a></li>
<li class="chapter" data-level="" data-path="envmapping.html"><a href="envmapping.html#mapeamento-de-ambiente-na-prática"><i class="fa fa-check"></i>Mapeamento de ambiente na prática</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="atividades.html"><a href="atividades.html"><i class="fa fa-check"></i>Atividades</a>
<ul>
<li class="chapter" data-level="" data-path="atividades.html"><a href="atividades.html#atividade-3-aplicação-interativa-com-gráficos-3d-iluminação-e-texturização"><i class="fa fa-check"></i>Atividade 3 (Aplicação interativa com gráficos 3D, iluminação e texturização)</a></li>
<li class="chapter" data-level="" data-path="atividades.html"><a href="atividades.html#atividade-2-aplicação-gráfica-3d-com-animações"><i class="fa fa-check"></i>Atividade 2 (Aplicação gráfica 3D com animações)</a></li>
<li class="chapter" data-level="" data-path="atividades.html"><a href="atividades.html#atividade-1-aplicação-interativa-com-gráficos-2d"><i class="fa fa-check"></i>Atividade 1 (Aplicação interativa com gráficos 2D)</a></li>
<li class="chapter" data-level="" data-path="atividades.html"><a href="atividades.html#atividade-final"><i class="fa fa-check"></i>Atividade final</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="referências.html"><a href="referências.html"><i class="fa fa-check"></i>Referências</a></li>
<li class="divider"></li>
<li>
<a href="https://github.com/hbatagelo/abcg" target="blank">ABCg no GitHub</a>
<br>
</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">MCTA008-17 Computação Gráfica</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="starfield" class="section level2 hasAnchor" number="8.5">
<h2><span class="header-section-number">8.5</span> Efeito starfield<a href="starfield.html#starfield" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Nesta seção aplicaremos a transformação de projeção perspectiva para produzir um interessante efeito de “campo estelar” (starfield) formado por cubos giratórios.</p>
<p>A aplicação permitirá alterar o ângulo de abertura do campo de visão, bem como alternar entre projeção perspectiva e projeção ortográfica.</p>
<p>O resultado ficará como a seguir.</p>
<iframe
  src="https://hbatagelo.github.io/abcgapps/starfield/index.html"
  allow="gamepad" frameborder="0" allowfullscreen="true" allowtransparency="true" emscriptenheight="740"
  ></iframe>
<p>Veja como o uso de projeção perspectiva é essencial para produzir o efeito desejado (compare com a projeção ortográfica).</p>
<div id="configuração-inicial-9" class="section level3 unnumbered hasAnchor">
<h3>Configuração inicial<a href="starfield.html#configuração-inicial-9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>No arquivo <code>abcg/examples/CMakeLists.txt</code>, inclua a linha:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode cmake"><code class="sourceCode cmake"><span id="cb321-1"><a href="starfield.html#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="kw">add_subdirectory</span>(starfield)</span></code></pre></div></li>
<li><p>Crie o subdiretório <code>abcg/examples/starfield</code> e o arquivo <code>abcg/examples/starfield/CMakeLists.txt</code> com o seguinte conteúdo:</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode cmake"><code class="sourceCode cmake"><span id="cb322-1"><a href="starfield.html#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="kw">project</span>(starfield)</span>
<span id="cb322-2"><a href="starfield.html#cb322-2" aria-hidden="true" tabindex="-1"></a><span class="kw">add_executable</span>(<span class="dv">${PROJECT_NAME}</span> <span class="bn">main.cpp</span> model.cpp window.cpp)</span>
<span id="cb322-3"><a href="starfield.html#cb322-3" aria-hidden="true" tabindex="-1"></a><span class="fu">enable_abcg</span>(<span class="dv">${PROJECT_NAME}</span>)</span></code></pre></div></li>
<li><p>Crie os seguintes arquivos vazios:</p>
<ul>
<li><code>main.cpp</code>;</li>
<li><code>window.cpp</code> e <code>window.hpp</code>.</li>
</ul></li>
<li><p>Copie os arquivos <code>model.cpp</code> e <code>model.hpp</code> do projeto da seção anterior (seção <a href="viewer1.html#viewer1">8.4</a>), pois eles serão utilizados sem modificações.</p></li>
<li><p>Crie o subdiretório <code>abcg/examples/starfield/assets</code> e, dentro dele, crie os arquivos vazios <code>depth.frag</code> e <code>depth.vert</code>. Além disso, copie para este subdiretório o modelo <code>box.obj</code> disponível <a href="https://hbatagelo.github.io/abcgapps/data/objmodels.zip">neste link</a>.</p></li>
</ul>
<p>A estrutura de <code>abcg/examples/starfield</code> ficará assim:</p>
<pre><code>starfield/
│   CMakeLists.txt
│   main.cpp
│   model.hpp
│   model.cpp
│   window.hpp
│   window.cpp
│
└───assets/
    │   box.obj
    │   depth.frag    
    └   depth.vert</code></pre>
</div>
<div id="main.cpp-9" class="section level3 unnumbered hasAnchor">
<h3>main.cpp<a href="starfield.html#main.cpp-9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>O conteúdo é igual ao do projeto anterior. Só mudamos o título da janela:</p>
<div class="sourceCode" id="cb324" startFrom="1"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp"><span id="cb324-1"><a href="starfield.html#cb324-1"></a><span class="pp">#include </span><span class="im">&quot;window.hpp&quot;</span></span>
<span id="cb324-2"><a href="starfield.html#cb324-2"></a></span>
<span id="cb324-3"><a href="starfield.html#cb324-3"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">**</span>argv<span class="op">)</span> <span class="op">{</span></span>
<span id="cb324-4"><a href="starfield.html#cb324-4"></a>  <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb324-5"><a href="starfield.html#cb324-5"></a>    abcg<span class="op">::</span>Application app<span class="op">(</span>argc<span class="op">,</span> argv<span class="op">);</span></span>
<span id="cb324-6"><a href="starfield.html#cb324-6"></a></span>
<span id="cb324-7"><a href="starfield.html#cb324-7"></a>    Window window<span class="op">;</span></span>
<span id="cb324-8"><a href="starfield.html#cb324-8"></a>    window<span class="op">.</span>setOpenGLSettings<span class="op">({.</span>samples <span class="op">=</span> <span class="dv">4</span><span class="op">});</span></span>
<span id="cb324-9"><a href="starfield.html#cb324-9"></a>    window<span class="op">.</span>setWindowSettings<span class="op">({</span></span>
<span id="cb324-10"><a href="starfield.html#cb324-10"></a>        <span class="op">.</span>width <span class="op">=</span> <span class="dv">600</span><span class="op">,</span></span>
<span id="cb324-11"><a href="starfield.html#cb324-11"></a>        <span class="op">.</span>height <span class="op">=</span> <span class="dv">600</span><span class="op">,</span></span>
<span id="cb324-12"><a href="starfield.html#cb324-12"></a>        <span class="op">.</span>title <span class="op">=</span> <span class="st">&quot;Starfield Effect&quot;</span><span class="op">,</span></span>
<span id="cb324-13"><a href="starfield.html#cb324-13"></a>    <span class="op">});</span></span>
<span id="cb324-14"><a href="starfield.html#cb324-14"></a></span>
<span id="cb324-15"><a href="starfield.html#cb324-15"></a>    app<span class="op">.</span>run<span class="op">(</span>window<span class="op">);</span></span>
<span id="cb324-16"><a href="starfield.html#cb324-16"></a>  <span class="op">}</span> <span class="cf">catch</span> <span class="op">(</span><span class="bu">std::</span>exception<span class="op"> </span><span class="at">const</span> <span class="op">&amp;</span>exception<span class="op">)</span> <span class="op">{</span></span>
<span id="cb324-17"><a href="starfield.html#cb324-17"></a>    fmt<span class="op">::</span>print<span class="op">(</span>stderr<span class="op">,</span> <span class="st">&quot;</span><span class="sc">{}\n</span><span class="st">&quot;</span><span class="op">,</span> exception<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb324-18"><a href="starfield.html#cb324-18"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb324-19"><a href="starfield.html#cb324-19"></a>  <span class="op">}</span></span>
<span id="cb324-20"><a href="starfield.html#cb324-20"></a>  <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb324-21"><a href="starfield.html#cb324-21"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="depth.vert-1" class="section level3 unnumbered hasAnchor">
<h3>depth.vert<a href="starfield.html#depth.vert-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>O vertex shader também é igual ao do projeto anterior. Só precisamos alterar <code>-posEyeSpace.z / 3.0</code> para <code>-posEyeSpace.z / 100.0</code> para que a intensidade da cor seja zero apenas quando <span class="math inline">\(z&lt;-100\)</span> no espaço da câmera.</p>
<div class="sourceCode" id="cb325" startFrom="1"><pre class="sourceCode numberSource glsl numberLines"><code class="sourceCode glsl"><span id="cb325-1"><a href="starfield.html#cb325-1"></a><span class="pp">#version 300 es</span></span>
<span id="cb325-2"><a href="starfield.html#cb325-2"></a></span>
<span id="cb325-3"><a href="starfield.html#cb325-3"></a><span class="kw">layout</span><span class="op">(</span><span class="dt">location</span> <span class="op">=</span> <span class="dv">0</span><span class="op">)</span> <span class="dt">in</span> <span class="dt">vec3</span> inPosition<span class="op">;</span></span>
<span id="cb325-4"><a href="starfield.html#cb325-4"></a></span>
<span id="cb325-5"><a href="starfield.html#cb325-5"></a><span class="kw">uniform</span> <span class="dt">vec4</span> color<span class="op">;</span></span>
<span id="cb325-6"><a href="starfield.html#cb325-6"></a><span class="kw">uniform</span> <span class="dt">mat4</span> modelMatrix<span class="op">;</span></span>
<span id="cb325-7"><a href="starfield.html#cb325-7"></a><span class="kw">uniform</span> <span class="dt">mat4</span> viewMatrix<span class="op">;</span></span>
<span id="cb325-8"><a href="starfield.html#cb325-8"></a><span class="kw">uniform</span> <span class="dt">mat4</span> projMatrix<span class="op">;</span></span>
<span id="cb325-9"><a href="starfield.html#cb325-9"></a></span>
<span id="cb325-10"><a href="starfield.html#cb325-10"></a><span class="dt">out</span> <span class="dt">vec4</span> fragColor<span class="op">;</span></span>
<span id="cb325-11"><a href="starfield.html#cb325-11"></a></span>
<span id="cb325-12"><a href="starfield.html#cb325-12"></a><span class="dt">void</span> <span class="fu">main</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb325-13"><a href="starfield.html#cb325-13"></a>  <span class="dt">vec4</span> posEyeSpace <span class="op">=</span> viewMatrix <span class="op">*</span> modelMatrix <span class="op">*</span> <span class="dt">vec4</span><span class="op">(</span>inPosition<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb325-14"><a href="starfield.html#cb325-14"></a></span>
<span id="cb325-15"><a href="starfield.html#cb325-15"></a>  <span class="dt">float</span> i <span class="op">=</span> <span class="fl">1.0</span> <span class="op">-</span> <span class="op">(-</span>posEyeSpace<span class="op">.</span><span class="fu">z</span> <span class="op">/</span> <span class="fl">100.0</span><span class="op">);</span></span>
<span id="cb325-16"><a href="starfield.html#cb325-16"></a>  fragColor <span class="op">=</span> <span class="dt">vec4</span><span class="op">(</span>i<span class="op">,</span> i<span class="op">,</span> i<span class="op">,</span> <span class="dv">1</span><span class="op">)</span> <span class="op">*</span> color<span class="op">;</span></span>
<span id="cb325-17"><a href="starfield.html#cb325-17"></a></span>
<span id="cb325-18"><a href="starfield.html#cb325-18"></a>  <span class="bu">gl_Position</span> <span class="op">=</span> projMatrix <span class="op">*</span> posEyeSpace<span class="op">;</span></span>
<span id="cb325-19"><a href="starfield.html#cb325-19"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="depth.frag-1" class="section level3 unnumbered hasAnchor">
<h3>depth.frag<a href="starfield.html#depth.frag-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>O conteúdo do fragment shader é mais simples que o <code>depth.frag</code> do projeto anterior. A cor recebida no atributo de entrada (<code>fragColor</code>) é enviada sem modificações para o atributo de saída (<code>outColor</code>):</p>
<div class="sourceCode" id="cb326" startFrom="1"><pre class="sourceCode numberSource glsl numberLines"><code class="sourceCode glsl"><span id="cb326-1"><a href="starfield.html#cb326-1"></a><span class="pp">#version 300 es</span></span>
<span id="cb326-2"><a href="starfield.html#cb326-2"></a></span>
<span id="cb326-3"><a href="starfield.html#cb326-3"></a><span class="dt">precision</span> <span class="dt">mediump</span> <span class="dt">float</span><span class="op">;</span></span>
<span id="cb326-4"><a href="starfield.html#cb326-4"></a></span>
<span id="cb326-5"><a href="starfield.html#cb326-5"></a><span class="dt">in</span> <span class="dt">vec4</span> fragColor<span class="op">;</span></span>
<span id="cb326-6"><a href="starfield.html#cb326-6"></a><span class="dt">out</span> <span class="dt">vec4</span> outColor<span class="op">;</span></span>
<span id="cb326-7"><a href="starfield.html#cb326-7"></a></span>
<span id="cb326-8"><a href="starfield.html#cb326-8"></a><span class="dt">void</span> <span class="fu">main</span><span class="op">()</span> <span class="op">{</span> outColor <span class="op">=</span> fragColor<span class="op">;</span> <span class="op">}</span></span></code></pre></div>
</div>
<div id="window.hpp-9" class="section level3 unnumbered hasAnchor">
<h3>window.hpp<a href="starfield.html#window.hpp-9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A definição da classe <code>Window</code> ficará assim:</p>
<div class="sourceCode" id="cb327" startFrom="1"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp"><span id="cb327-1"><a href="starfield.html#cb327-1"></a><span class="pp">#ifndef WINDOW_HPP_</span></span>
<span id="cb327-2"><a href="starfield.html#cb327-2"></a><span class="pp">#define WINDOW_HPP_</span></span>
<span id="cb327-3"><a href="starfield.html#cb327-3"></a></span>
<span id="cb327-4"><a href="starfield.html#cb327-4"></a><span class="pp">#include </span><span class="im">&lt;random&gt;</span></span>
<span id="cb327-5"><a href="starfield.html#cb327-5"></a></span>
<span id="cb327-6"><a href="starfield.html#cb327-6"></a><span class="pp">#include </span><span class="im">&quot;abcgOpenGL.hpp&quot;</span></span>
<span id="cb327-7"><a href="starfield.html#cb327-7"></a><span class="pp">#include </span><span class="im">&quot;model.hpp&quot;</span></span>
<span id="cb327-8"><a href="starfield.html#cb327-8"></a></span>
<span id="cb327-9"><a href="starfield.html#cb327-9"></a><span class="kw">class</span> Window <span class="op">:</span> <span class="kw">public</span> abcg<span class="op">::</span>OpenGLWindow <span class="op">{</span></span>
<span id="cb327-10"><a href="starfield.html#cb327-10"></a><span class="kw">protected</span><span class="op">:</span></span>
<span id="cb327-11"><a href="starfield.html#cb327-11"></a>  <span class="dt">void</span> onCreate<span class="op">()</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb327-12"><a href="starfield.html#cb327-12"></a>  <span class="dt">void</span> onUpdate<span class="op">()</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb327-13"><a href="starfield.html#cb327-13"></a>  <span class="dt">void</span> onPaint<span class="op">()</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb327-14"><a href="starfield.html#cb327-14"></a>  <span class="dt">void</span> onPaintUI<span class="op">()</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb327-15"><a href="starfield.html#cb327-15"></a>  <span class="dt">void</span> onResize<span class="op">(</span>glm<span class="op">::</span>ivec2 <span class="at">const</span> <span class="op">&amp;</span>size<span class="op">)</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb327-16"><a href="starfield.html#cb327-16"></a>  <span class="dt">void</span> onDestroy<span class="op">()</span> <span class="kw">override</span><span class="op">;</span></span>
<span id="cb327-17"><a href="starfield.html#cb327-17"></a></span>
<span id="cb327-18"><a href="starfield.html#cb327-18"></a><span class="kw">private</span><span class="op">:</span></span>
<span id="cb327-19"><a href="starfield.html#cb327-19"></a>  <span class="bu">std::</span>default_random_engine<span class="op"> </span><span class="va">m_randomEngine</span><span class="op">;</span></span>
<span id="cb327-20"><a href="starfield.html#cb327-20"></a></span>
<span id="cb327-21"><a href="starfield.html#cb327-21"></a>  glm<span class="op">::</span>ivec2 <span class="va">m_viewportSize</span><span class="op">{};</span></span>
<span id="cb327-22"><a href="starfield.html#cb327-22"></a></span>
<span id="cb327-23"><a href="starfield.html#cb327-23"></a>  Model <span class="va">m_model</span><span class="op">;</span></span>
<span id="cb327-24"><a href="starfield.html#cb327-24"></a></span>
<span id="cb327-25"><a href="starfield.html#cb327-25"></a>  <span class="kw">struct</span> Star <span class="op">{</span></span>
<span id="cb327-26"><a href="starfield.html#cb327-26"></a>    glm<span class="op">::</span>vec3 <span class="va">m_position</span><span class="op">{};</span></span>
<span id="cb327-27"><a href="starfield.html#cb327-27"></a>    glm<span class="op">::</span>vec3 <span class="va">m_rotationAxis</span><span class="op">{};</span></span>
<span id="cb327-28"><a href="starfield.html#cb327-28"></a>  <span class="op">};</span></span>
<span id="cb327-29"><a href="starfield.html#cb327-29"></a></span>
<span id="cb327-30"><a href="starfield.html#cb327-30"></a>  <span class="bu">std::</span>array<span class="op">&lt;</span>Star<span class="op">,</span> <span class="dv">500</span><span class="op">&gt;</span> <span class="va">m_stars</span><span class="op">;</span></span>
<span id="cb327-31"><a href="starfield.html#cb327-31"></a></span>
<span id="cb327-32"><a href="starfield.html#cb327-32"></a>  <span class="dt">float</span> <span class="va">m_angle</span><span class="op">{};</span></span>
<span id="cb327-33"><a href="starfield.html#cb327-33"></a></span>
<span id="cb327-34"><a href="starfield.html#cb327-34"></a>  glm<span class="op">::</span>mat4 <span class="va">m_viewMatrix</span><span class="op">{</span><span class="fl">1.0</span><span class="bu">f</span><span class="op">};</span></span>
<span id="cb327-35"><a href="starfield.html#cb327-35"></a>  glm<span class="op">::</span>mat4 <span class="va">m_projMatrix</span><span class="op">{</span><span class="fl">1.0</span><span class="bu">f</span><span class="op">};</span></span>
<span id="cb327-36"><a href="starfield.html#cb327-36"></a>  <span class="dt">float</span> <span class="va">m_FOV</span><span class="op">{</span><span class="fl">30.0</span><span class="bu">f</span><span class="op">};</span></span>
<span id="cb327-37"><a href="starfield.html#cb327-37"></a></span>
<span id="cb327-38"><a href="starfield.html#cb327-38"></a>  GLuint <span class="va">m_program</span><span class="op">{};</span></span>
<span id="cb327-39"><a href="starfield.html#cb327-39"></a></span>
<span id="cb327-40"><a href="starfield.html#cb327-40"></a>  <span class="dt">void</span> randomizeStar<span class="op">(</span>Star <span class="op">&amp;</span>star<span class="op">);</span></span>
<span id="cb327-41"><a href="starfield.html#cb327-41"></a><span class="op">};</span></span>
<span id="cb327-42"><a href="starfield.html#cb327-42"></a></span>
<span id="cb327-43"><a href="starfield.html#cb327-43"></a><span class="pp">#endif</span></span></code></pre></div>
<p>O objeto <code>m_model</code>, definido na linha 23, é utilizado para armazenar o VBO/EBO e VAO que representa a estrela do campo estrelado. A estrela, em seu espaço local, será um cubo centralizado na origem, definido pelo arquivo <code>box.obj</code>.</p>
<p>Cada estrela é representada por uma estrutura <code>Star</code> que contém uma posição (posição do centro do cubo) e um eixo de rotação. A partir desses atributos conseguiremos criar a matriz de modelo que posicionará a estrela no espaço do mundo. Cada matriz de modelo será definida como uma concatenação</p>
<p><span class="math display">\[
\mathbf{M}_{\textrm{model}}=\mathbf{T}\mathbf{S}\mathbf{R},
\]</span></p>
<p>onde <span class="math inline">\(\mathbf{R}\)</span> é uma rotação que faz o cubo centralizado na origem girar em torno do eixo especificado em <code>m_rotationAxis</code>, <span class="math inline">\(\mathbf{S}\)</span> é um fator de escala uniforme (usaremos <span class="math inline">\(s=0.2\)</span> para todos os cubos) e <span class="math inline">\(\mathbf{T}\)</span> é a translação que faz com que o cubo rotacionado seja posicionado no espaço do mundo na posição indicada em <code>m_position</code>.</p>
<p>A cena 3D será formada por 500 estrelas (arranjo <code>m_stars</code>).</p>
<p>Na linha 32, <code>m_angle</code> é um ângulo de rotação em radianos que será utilizado para rodar cada cubo por seu respectivo eixo de rotação. Os cubos rodam pelo mesmo ângulo, mas cada um tem seu próprio eixo aleatório de rotação.</p>
<p>Nas linhas 34 e 35 são definidas as matrizes de visão (<code>m_viewMatrix</code>) e de projeção (<code>m_projMatrix</code>). Aqui elas estão como matrizes identidade por padrão, mas serão modificadas posteriormente em <code>Window::onCreate</code> e <code>Window::onPaintUI</code>.</p>
<p>Na linha 36, o atributo <code>m_FOV</code> é o ângulo de abertura vertical do campo de visão da projeção perspectiva. Esse valor poderá ser controlado por um slider da ImGui, variando de <span class="math inline">\(5^\circ\)</span> a <span class="math inline">\(179^\circ\)</span>.</p>
<p>A função <code>Window::randomizeStar</code> (linha 40) usa o gerador de números pseudoaleatórios <code>m_randomEngine</code> (linha 19) para sortear uma posição e eixo de rotação para a estrela <code>star</code> passada por referência.</p>
</div>
<div id="window.cpp-9" class="section level3 unnumbered hasAnchor">
<h3>window.cpp<a href="starfield.html#window.cpp-9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>O arquivo <code>window.cpp</code> começa com a definição de <code>Window::onCreate</code>:</p>
<div class="sourceCode" id="cb328" startFrom="1"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp"><span id="cb328-1"><a href="starfield.html#cb328-1"></a><span class="pp">#include </span><span class="im">&quot;window.hpp&quot;</span></span>
<span id="cb328-2"><a href="starfield.html#cb328-2"></a></span>
<span id="cb328-3"><a href="starfield.html#cb328-3"></a><span class="pp">#include </span><span class="im">&lt;glm/gtc/random.hpp&gt;</span></span>
<span id="cb328-4"><a href="starfield.html#cb328-4"></a><span class="pp">#include </span><span class="im">&lt;glm/gtx/fast_trigonometry.hpp&gt;</span></span>
<span id="cb328-5"><a href="starfield.html#cb328-5"></a></span>
<span id="cb328-6"><a href="starfield.html#cb328-6"></a><span class="dt">void</span> Window<span class="op">::</span>onCreate<span class="op">()</span> <span class="op">{</span></span>
<span id="cb328-7"><a href="starfield.html#cb328-7"></a>  <span class="kw">auto</span> <span class="at">const</span> assetsPath<span class="op">{</span>abcg<span class="op">::</span>Application<span class="op">::</span>getAssetsPath<span class="op">()};</span></span>
<span id="cb328-8"><a href="starfield.html#cb328-8"></a></span>
<span id="cb328-9"><a href="starfield.html#cb328-9"></a>  abcg<span class="op">::</span>glClearColor<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb328-10"><a href="starfield.html#cb328-10"></a>  abcg<span class="op">::</span>glEnable<span class="op">(</span>GL_DEPTH_TEST<span class="op">);</span></span>
<span id="cb328-11"><a href="starfield.html#cb328-11"></a></span>
<span id="cb328-12"><a href="starfield.html#cb328-12"></a>  <span class="va">m_program</span> <span class="op">=</span></span>
<span id="cb328-13"><a href="starfield.html#cb328-13"></a>      abcg<span class="op">::</span>createOpenGLProgram<span class="op">({{.</span>source <span class="op">=</span> assetsPath <span class="op">+</span> <span class="st">&quot;depth.vert&quot;</span><span class="op">,</span></span>
<span id="cb328-14"><a href="starfield.html#cb328-14"></a>                                  <span class="op">.</span>stage <span class="op">=</span> abcg<span class="op">::</span>ShaderStage<span class="op">::</span>Vertex<span class="op">},</span></span>
<span id="cb328-15"><a href="starfield.html#cb328-15"></a>                                 <span class="op">{.</span>source <span class="op">=</span> assetsPath <span class="op">+</span> <span class="st">&quot;depth.frag&quot;</span><span class="op">,</span></span>
<span id="cb328-16"><a href="starfield.html#cb328-16"></a>                                  <span class="op">.</span>stage <span class="op">=</span> abcg<span class="op">::</span>ShaderStage<span class="op">::</span>Fragment<span class="op">}});</span></span>
<span id="cb328-17"><a href="starfield.html#cb328-17"></a></span>
<span id="cb328-18"><a href="starfield.html#cb328-18"></a>  <span class="va">m_model</span><span class="op">.</span>loadObj<span class="op">(</span>assetsPath <span class="op">+</span> <span class="st">&quot;box.obj&quot;</span><span class="op">);</span></span>
<span id="cb328-19"><a href="starfield.html#cb328-19"></a>  <span class="va">m_model</span><span class="op">.</span>setupVAO<span class="op">(</span><span class="va">m_program</span><span class="op">);</span></span>
<span id="cb328-20"><a href="starfield.html#cb328-20"></a></span>
<span id="cb328-21"><a href="starfield.html#cb328-21"></a>  <span class="co">// Camera at (0,0,0) and looking towards the negative z</span></span>
<span id="cb328-22"><a href="starfield.html#cb328-22"></a>  glm<span class="op">::</span>vec3 <span class="at">const</span> eye<span class="op">{</span><span class="fl">0.0</span><span class="bu">f</span><span class="op">,</span> <span class="fl">0.0</span><span class="bu">f</span><span class="op">,</span> <span class="fl">0.0</span><span class="bu">f</span><span class="op">};</span></span>
<span id="cb328-23"><a href="starfield.html#cb328-23"></a>  glm<span class="op">::</span>vec3 <span class="at">const</span> at<span class="op">{</span><span class="fl">0.0</span><span class="bu">f</span><span class="op">,</span> <span class="fl">0.0</span><span class="bu">f</span><span class="op">,</span> <span class="op">-</span><span class="fl">1.0</span><span class="bu">f</span><span class="op">};</span></span>
<span id="cb328-24"><a href="starfield.html#cb328-24"></a>  glm<span class="op">::</span>vec3 <span class="at">const</span> up<span class="op">{</span><span class="fl">0.0</span><span class="bu">f</span><span class="op">,</span> <span class="fl">1.0</span><span class="bu">f</span><span class="op">,</span> <span class="fl">0.0</span><span class="bu">f</span><span class="op">};</span></span>
<span id="cb328-25"><a href="starfield.html#cb328-25"></a>  <span class="va">m_viewMatrix</span> <span class="op">=</span> glm<span class="op">::</span>lookAt<span class="op">(</span>eye<span class="op">,</span> at<span class="op">,</span> up<span class="op">);</span></span>
<span id="cb328-26"><a href="starfield.html#cb328-26"></a></span>
<span id="cb328-27"><a href="starfield.html#cb328-27"></a>  <span class="co">// Setup stars</span></span>
<span id="cb328-28"><a href="starfield.html#cb328-28"></a>  <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="op">&amp;</span>star <span class="op">:</span> <span class="va">m_stars</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb328-29"><a href="starfield.html#cb328-29"></a>    randomizeStar<span class="op">(</span>star<span class="op">);</span></span>
<span id="cb328-30"><a href="starfield.html#cb328-30"></a>  <span class="op">}</span></span>
<span id="cb328-31"><a href="starfield.html#cb328-31"></a><span class="op">}</span></span></code></pre></div>
<p>Na linha 25 é definida a matriz de visão como uma câmera LookAt que está na origem do espaço do mundo, olhando na direção do eixo <span class="math inline">\(z\)</span> negativo. Durante a execução, a câmera permanecerá fixa nessa posição e orientação. As estrelas (isto é, os cubos) é que mudarão de posição para produzir o efeito de animação.</p>
<p>O laço das linhas 28 a 30 itera sobre cada elemento do arranjo <code>m_stars</code> e chama <code>Window::randomizeStar</code> para sortear uma posição e eixo de rotação inicial para cada estrela.</p>
<p>A definição de <code>Window::randomizeStar</code> ficará como a seguir:</p>
<div class="sourceCode" id="cb329" startFrom="33"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp" style="counter-reset: source-line 32;"><span id="cb329-33"><a href="starfield.html#cb329-33"></a><span class="dt">void</span> Window<span class="op">::</span>randomizeStar<span class="op">(</span>Star <span class="op">&amp;</span>star<span class="op">)</span> <span class="op">{</span></span>
<span id="cb329-34"><a href="starfield.html#cb329-34"></a>  <span class="co">// Random position: x and y in [-20, 20), z in [-100, 0)</span></span>
<span id="cb329-35"><a href="starfield.html#cb329-35"></a>  <span class="bu">std::</span>uniform_real_distribution<span class="op">&lt;</span><span class="dt">float</span><span class="op">&gt;</span> distPosXY<span class="op">(-</span><span class="fl">20.0</span><span class="bu">f</span><span class="op">,</span> <span class="fl">20.0</span><span class="bu">f</span><span class="op">);</span></span>
<span id="cb329-36"><a href="starfield.html#cb329-36"></a>  <span class="bu">std::</span>uniform_real_distribution<span class="op">&lt;</span><span class="dt">float</span><span class="op">&gt;</span> distPosZ<span class="op">(-</span><span class="fl">100.0</span><span class="bu">f</span><span class="op">,</span> <span class="fl">0.0</span><span class="bu">f</span><span class="op">);</span></span>
<span id="cb329-37"><a href="starfield.html#cb329-37"></a>  star<span class="op">.</span><span class="va">m_position</span> <span class="op">=</span></span>
<span id="cb329-38"><a href="starfield.html#cb329-38"></a>      glm<span class="op">::</span>vec3<span class="op">(</span>distPosXY<span class="op">(</span><span class="va">m_randomEngine</span><span class="op">),</span> distPosXY<span class="op">(</span><span class="va">m_randomEngine</span><span class="op">),</span></span>
<span id="cb329-39"><a href="starfield.html#cb329-39"></a>                distPosZ<span class="op">(</span><span class="va">m_randomEngine</span><span class="op">));</span></span>
<span id="cb329-40"><a href="starfield.html#cb329-40"></a></span>
<span id="cb329-41"><a href="starfield.html#cb329-41"></a>  <span class="co">// Random rotation axis</span></span>
<span id="cb329-42"><a href="starfield.html#cb329-42"></a>  star<span class="op">.</span><span class="va">m_rotationAxis</span> <span class="op">=</span> glm<span class="op">::</span>sphericalRand<span class="op">(</span><span class="fl">1.0</span><span class="bu">f</span><span class="op">);</span></span>
<span id="cb329-43"><a href="starfield.html#cb329-43"></a><span class="op">}</span></span></code></pre></div>
<p>Para a escolha da posição aleatória <span class="math inline">\((x,y,z)\)</span>:</p>
<ul>
<li>As coordenadas <span class="math inline">\(x\)</span> e <span class="math inline">\(y\)</span> são escolhidas do intervalo <span class="math inline">\([-20, 20)\)</span>;</li>
<li>A coordenada <span class="math inline">\(z\)</span> é escolhida do intervalo <span class="math inline">\([-100, 0)\)</span>.</li>
</ul>
<p>Assim, o campo estrelado é a região cuboide que vai de <span class="math inline">\((-20,-20,-100)\)</span> a <span class="math inline">\((20,20,0)\)</span>. Lembre-se que a câmera está em <span class="math inline">\(z=0\)</span>, olhando para <span class="math inline">\(z\)</span> negativo. Logo, a câmera pode enxergar potencialmente toda essa região, a depender das configurações de projeção.</p>
<p>Para a escolha do eixo de rotação, utilizamos um vetor unitário aleatório calculado com <code>glm::sphericalRand</code>.</p>
<p>Vamos agora à definição de <code>Window::onUpdate</code> que atualiza a posição e a rotação das estrelas de modo a produzir o efeito de animação:</p>
<div class="sourceCode" id="cb330" startFrom="45"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp" style="counter-reset: source-line 44;"><span id="cb330-45"><a href="starfield.html#cb330-45"></a><span class="dt">void</span> Window<span class="op">::</span>onUpdate<span class="op">()</span> <span class="op">{</span></span>
<span id="cb330-46"><a href="starfield.html#cb330-46"></a>  <span class="co">// Increase angle by 90 degrees per second</span></span>
<span id="cb330-47"><a href="starfield.html#cb330-47"></a>  <span class="kw">auto</span> <span class="at">const</span> deltaTime<span class="op">{</span>gsl<span class="op">::</span>narrow_cast<span class="op">&lt;</span><span class="dt">float</span><span class="op">&gt;(</span>getDeltaTime<span class="op">())};</span></span>
<span id="cb330-48"><a href="starfield.html#cb330-48"></a>  <span class="va">m_angle</span> <span class="op">=</span> glm<span class="op">::</span>wrapAngle<span class="op">(</span><span class="va">m_angle</span> <span class="op">+</span> glm<span class="op">::</span>radians<span class="op">(</span><span class="fl">90.0</span><span class="bu">f</span><span class="op">)</span> <span class="op">*</span> deltaTime<span class="op">);</span></span>
<span id="cb330-49"><a href="starfield.html#cb330-49"></a></span>
<span id="cb330-50"><a href="starfield.html#cb330-50"></a>  <span class="co">// Update stars</span></span>
<span id="cb330-51"><a href="starfield.html#cb330-51"></a>  <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="op">&amp;</span>star <span class="op">:</span> <span class="va">m_stars</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb330-52"><a href="starfield.html#cb330-52"></a>    <span class="co">// Increase z by 10 units per second</span></span>
<span id="cb330-53"><a href="starfield.html#cb330-53"></a>    star<span class="op">.</span><span class="va">m_position</span><span class="op">.</span>z <span class="op">+=</span> deltaTime <span class="op">*</span> <span class="fl">10.0</span><span class="bu">f</span><span class="op">;</span></span>
<span id="cb330-54"><a href="starfield.html#cb330-54"></a></span>
<span id="cb330-55"><a href="starfield.html#cb330-55"></a>    <span class="co">// If this star is behind the camera, select a new random position &amp;</span></span>
<span id="cb330-56"><a href="starfield.html#cb330-56"></a>    <span class="co">// orientation and move it back to -100</span></span>
<span id="cb330-57"><a href="starfield.html#cb330-57"></a>    <span class="cf">if</span> <span class="op">(</span>star<span class="op">.</span><span class="va">m_position</span><span class="op">.</span>z <span class="op">&gt;</span> <span class="fl">0.1</span><span class="bu">f</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb330-58"><a href="starfield.html#cb330-58"></a>      randomizeStar<span class="op">(</span>star<span class="op">);</span></span>
<span id="cb330-59"><a href="starfield.html#cb330-59"></a>      star<span class="op">.</span><span class="va">m_position</span><span class="op">.</span>z <span class="op">=</span> <span class="op">-</span><span class="fl">100.0</span><span class="bu">f</span><span class="op">;</span> <span class="co">// Back to -100</span></span>
<span id="cb330-60"><a href="starfield.html#cb330-60"></a>    <span class="op">}</span></span>
<span id="cb330-61"><a href="starfield.html#cb330-61"></a>  <span class="op">}</span></span>
<span id="cb330-62"><a href="starfield.html#cb330-62"></a><span class="op">}</span></span></code></pre></div>
<p>Na linha 48, incrementamos <code>m_angle</code> a uma taxa de <span class="math inline">\(90^\circ\)</span> por segundo. Além disso, iteramos sobre todas as estrelas no laço da linha 51. A coordenada <span class="math inline">\(z\)</span> da posição de cada estrela é incrementada a uma taxa de 10 unidades por segundo (linha 53). Assim, uma estrela que começa em <span class="math inline">\(z=-100\)</span> (distância máxima em relação à câmera) chegará até <span class="math inline">\(z=0\)</span> (onde está a câmera) em 10 segundos.</p>
<p>A condicional da linha 57 verifica se a estrela já passou para trás da câmera. Verificamos se a coordenada <span class="math inline">\(z\)</span> da posição é maior que <span class="math inline">\(0.1\)</span> pois a estrela é um cubo unitário que foi reduzido em tamanho por um fator de escala <span class="math inline">\(0.2\)</span>. Logo, quando o cubo estiver em <span class="math inline">\(z=0\)</span> (isto é, na posição <span class="math inline">\(z\)</span> da câmera), ainda estará com metade da malha triangular (metade do cubo) no espaço <span class="math inline">\(z&lt;0\)</span>. Isso significa que o cubo ainda poderá ser visto pela câmera, pois a câmera está olhando na direção de <span class="math inline">\(z\)</span> negativo e a distância do plano de recorte próximo será definida como <span class="math inline">\(0.01\)</span> (Veremos isso mais adiante). Se <span class="math inline">\(z&gt;0.1\)</span>, então com certeza o cubo está totalmente atrás da câmera. Quando isso acontece, <code>Window::randomizeStar</code> é chamada novamente para sortear uma nova posição e eixo de rotação para a estrela. Além disso, a estrela é deslocada para <span class="math inline">\(z=-100\)</span> para começar um novo percurso em direção ao plano <span class="math inline">\(z=0\)</span> da câmera.</p>
<p>A definição de <code>Window::paintGL</code> ficará como a seguir:</p>
<div class="sourceCode" id="cb331" startFrom="64"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp" style="counter-reset: source-line 63;"><span id="cb331-64"><a href="starfield.html#cb331-64"></a><span class="dt">void</span> Window<span class="op">::</span>onPaint<span class="op">()</span> <span class="op">{</span></span>
<span id="cb331-65"><a href="starfield.html#cb331-65"></a>  abcg<span class="op">::</span>glClear<span class="op">(</span>GL_COLOR_BUFFER_BIT <span class="op">|</span> GL_DEPTH_BUFFER_BIT<span class="op">);</span></span>
<span id="cb331-66"><a href="starfield.html#cb331-66"></a></span>
<span id="cb331-67"><a href="starfield.html#cb331-67"></a>  abcg<span class="op">::</span>glViewport<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">m_viewportSize</span><span class="op">.</span>x<span class="op">,</span> <span class="va">m_viewportSize</span><span class="op">.</span>y<span class="op">);</span></span>
<span id="cb331-68"><a href="starfield.html#cb331-68"></a></span>
<span id="cb331-69"><a href="starfield.html#cb331-69"></a>  abcg<span class="op">::</span>glUseProgram<span class="op">(</span><span class="va">m_program</span><span class="op">);</span></span>
<span id="cb331-70"><a href="starfield.html#cb331-70"></a></span>
<span id="cb331-71"><a href="starfield.html#cb331-71"></a>  <span class="co">// Get location of uniform variables</span></span>
<span id="cb331-72"><a href="starfield.html#cb331-72"></a>  <span class="kw">auto</span> <span class="at">const</span> viewMatrixLoc<span class="op">{</span>abcg<span class="op">::</span>glGetUniformLocation<span class="op">(</span><span class="va">m_program</span><span class="op">,</span> <span class="st">&quot;viewMatrix&quot;</span><span class="op">)};</span></span>
<span id="cb331-73"><a href="starfield.html#cb331-73"></a>  <span class="kw">auto</span> <span class="at">const</span> projMatrixLoc<span class="op">{</span>abcg<span class="op">::</span>glGetUniformLocation<span class="op">(</span><span class="va">m_program</span><span class="op">,</span> <span class="st">&quot;projMatrix&quot;</span><span class="op">)};</span></span>
<span id="cb331-74"><a href="starfield.html#cb331-74"></a>  <span class="kw">auto</span> <span class="at">const</span> modelMatrixLoc<span class="op">{</span></span>
<span id="cb331-75"><a href="starfield.html#cb331-75"></a>      abcg<span class="op">::</span>glGetUniformLocation<span class="op">(</span><span class="va">m_program</span><span class="op">,</span> <span class="st">&quot;modelMatrix&quot;</span><span class="op">)};</span></span>
<span id="cb331-76"><a href="starfield.html#cb331-76"></a>  <span class="kw">auto</span> <span class="at">const</span> colorLoc<span class="op">{</span>abcg<span class="op">::</span>glGetUniformLocation<span class="op">(</span><span class="va">m_program</span><span class="op">,</span> <span class="st">&quot;color&quot;</span><span class="op">)};</span></span>
<span id="cb331-77"><a href="starfield.html#cb331-77"></a></span>
<span id="cb331-78"><a href="starfield.html#cb331-78"></a>  <span class="co">// Set uniform variables that have the same value for every model</span></span>
<span id="cb331-79"><a href="starfield.html#cb331-79"></a>  abcg<span class="op">::</span>glUniformMatrix4fv<span class="op">(</span>viewMatrixLoc<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> GL_FALSE<span class="op">,</span> <span class="op">&amp;</span><span class="va">m_viewMatrix</span><span class="op">[</span><span class="dv">0</span><span class="op">][</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb331-80"><a href="starfield.html#cb331-80"></a>  abcg<span class="op">::</span>glUniformMatrix4fv<span class="op">(</span>projMatrixLoc<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> GL_FALSE<span class="op">,</span> <span class="op">&amp;</span><span class="va">m_projMatrix</span><span class="op">[</span><span class="dv">0</span><span class="op">][</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb331-81"><a href="starfield.html#cb331-81"></a>  abcg<span class="op">::</span>glUniform4f<span class="op">(</span>colorLoc<span class="op">,</span> <span class="fl">1.0</span><span class="bu">f</span><span class="op">,</span> <span class="fl">1.0</span><span class="bu">f</span><span class="op">,</span> <span class="fl">1.0</span><span class="bu">f</span><span class="op">,</span> <span class="fl">1.0</span><span class="bu">f</span><span class="op">);</span> <span class="co">// White</span></span>
<span id="cb331-82"><a href="starfield.html#cb331-82"></a></span>
<span id="cb331-83"><a href="starfield.html#cb331-83"></a>  <span class="co">// Render each star</span></span>
<span id="cb331-84"><a href="starfield.html#cb331-84"></a>  <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="op">&amp;</span>star <span class="op">:</span> <span class="va">m_stars</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb331-85"><a href="starfield.html#cb331-85"></a>    <span class="co">// Compute model matrix of the current star</span></span>
<span id="cb331-86"><a href="starfield.html#cb331-86"></a>    glm<span class="op">::</span>mat4 modelMatrix<span class="op">{</span><span class="fl">1.0</span><span class="bu">f</span><span class="op">};</span></span>
<span id="cb331-87"><a href="starfield.html#cb331-87"></a>    modelMatrix <span class="op">=</span> glm<span class="op">::</span>translate<span class="op">(</span>modelMatrix<span class="op">,</span> star<span class="op">.</span><span class="va">m_position</span><span class="op">);</span></span>
<span id="cb331-88"><a href="starfield.html#cb331-88"></a>    modelMatrix <span class="op">=</span> glm<span class="op">::</span>scale<span class="op">(</span>modelMatrix<span class="op">,</span> glm<span class="op">::</span>vec3<span class="op">(</span><span class="fl">0.2</span><span class="bu">f</span><span class="op">));</span></span>
<span id="cb331-89"><a href="starfield.html#cb331-89"></a>    modelMatrix <span class="op">=</span> glm<span class="op">::</span>rotate<span class="op">(</span>modelMatrix<span class="op">,</span> <span class="va">m_angle</span><span class="op">,</span> star<span class="op">.</span><span class="va">m_rotationAxis</span><span class="op">);</span></span>
<span id="cb331-90"><a href="starfield.html#cb331-90"></a></span>
<span id="cb331-91"><a href="starfield.html#cb331-91"></a>    <span class="co">// Set uniform variable</span></span>
<span id="cb331-92"><a href="starfield.html#cb331-92"></a>    abcg<span class="op">::</span>glUniformMatrix4fv<span class="op">(</span>modelMatrixLoc<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> GL_FALSE<span class="op">,</span> <span class="op">&amp;</span>modelMatrix<span class="op">[</span><span class="dv">0</span><span class="op">][</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb331-93"><a href="starfield.html#cb331-93"></a></span>
<span id="cb331-94"><a href="starfield.html#cb331-94"></a>    <span class="va">m_model</span><span class="op">.</span>render<span class="op">();</span></span>
<span id="cb331-95"><a href="starfield.html#cb331-95"></a>  <span class="op">}</span></span>
<span id="cb331-96"><a href="starfield.html#cb331-96"></a></span>
<span id="cb331-97"><a href="starfield.html#cb331-97"></a>  abcg<span class="op">::</span>glUseProgram<span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb331-98"><a href="starfield.html#cb331-98"></a><span class="op">}</span></span></code></pre></div>
<p>Nas linhas 79 a 81 são definidos os valores das variáveis uniformes compartilhadas por todas as estrelas. Em particular, todas as estrelas usam a mesma matriz de visão e projeção. Além disso, todas usam a mesma cor (branca).</p>
<p>No laço da linha 84, cada estrela é renderizada. A matriz de modelo é construída nas linhas 86 a 89 usando os atributos da estrela.</p>
<p>A matriz de modelo é copiada para o vertex shader na linha 92. Em seguida, na linha 94, a função <code>Model::render</code> é chamada para renderizar o objeto que representa a estrela, isto é, o cubo.</p>
<p>É importante observar que o mesmo cubo (mesmo VBO) está seja renderizado 500 vezes, mas cada iteração utiliza uma matriz de modelo diferente. Podemos fazer isso pois todas as estrelas usam a mesma malha de triângulos (8 vértices e 12 triângulos). A única coisa que muda entre o desenho de uma estrela e outra é a posição e orientação. Atributos como posição, orientação e escala da malha podem ser modificados no vertex shader por matrizes de transformação, que é o que estamos fazendo.</p>
<p>A definição de <code>Window::onPaintUI</code> ficará assim:</p>
<div class="sourceCode" id="cb332" startFrom="100"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp" style="counter-reset: source-line 99;"><span id="cb332-100"><a href="starfield.html#cb332-100"></a><span class="dt">void</span> Window<span class="op">::</span>onPaintUI<span class="op">()</span> <span class="op">{</span></span>
<span id="cb332-101"><a href="starfield.html#cb332-101"></a>  abcg<span class="op">::</span>OpenGLWindow<span class="op">::</span>onPaintUI<span class="op">();</span></span>
<span id="cb332-102"><a href="starfield.html#cb332-102"></a></span>
<span id="cb332-103"><a href="starfield.html#cb332-103"></a>  <span class="op">{</span></span>
<span id="cb332-104"><a href="starfield.html#cb332-104"></a>    <span class="kw">auto</span> <span class="at">const</span> widgetSize<span class="op">{</span>ImVec2<span class="op">(</span><span class="dv">218</span><span class="op">,</span> <span class="dv">62</span><span class="op">)};</span></span>
<span id="cb332-105"><a href="starfield.html#cb332-105"></a>    ImGui<span class="op">::</span>SetNextWindowPos<span class="op">(</span>ImVec2<span class="op">(</span><span class="va">m_viewportSize</span><span class="op">.</span>x <span class="op">-</span> widgetSize<span class="op">.</span>x <span class="op">-</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">5</span><span class="op">));</span></span>
<span id="cb332-106"><a href="starfield.html#cb332-106"></a>    ImGui<span class="op">::</span>SetNextWindowSize<span class="op">(</span>widgetSize<span class="op">);</span></span>
<span id="cb332-107"><a href="starfield.html#cb332-107"></a>    ImGui<span class="op">::</span>Begin<span class="op">(</span><span class="st">&quot;Widget window&quot;</span><span class="op">,</span> <span class="kw">nullptr</span><span class="op">,</span> ImGuiWindowFlags_NoDecoration<span class="op">);</span></span>
<span id="cb332-108"><a href="starfield.html#cb332-108"></a></span>
<span id="cb332-109"><a href="starfield.html#cb332-109"></a>    <span class="op">{</span></span>
<span id="cb332-110"><a href="starfield.html#cb332-110"></a>      ImGui<span class="op">::</span>PushItemWidth<span class="op">(</span><span class="dv">120</span><span class="op">);</span></span>
<span id="cb332-111"><a href="starfield.html#cb332-111"></a>      <span class="at">static</span> <span class="bu">std::</span>size_t<span class="op"> </span>currentIndex<span class="op">{};</span></span>
<span id="cb332-112"><a href="starfield.html#cb332-112"></a>      <span class="bu">std::</span>vector<span class="op">&lt;</span><span class="bu">std::</span>string<span class="op">&gt;</span> <span class="at">const</span> comboItems<span class="op">{</span><span class="st">&quot;Perspective&quot;</span><span class="op">,</span> <span class="st">&quot;Orthographic&quot;</span><span class="op">};</span></span>
<span id="cb332-113"><a href="starfield.html#cb332-113"></a></span>
<span id="cb332-114"><a href="starfield.html#cb332-114"></a>      <span class="cf">if</span> <span class="op">(</span>ImGui<span class="op">::</span>BeginCombo<span class="op">(</span><span class="st">&quot;Projection&quot;</span><span class="op">,</span></span>
<span id="cb332-115"><a href="starfield.html#cb332-115"></a>                            comboItems<span class="op">.</span>at<span class="op">(</span>currentIndex<span class="op">).</span>c_str<span class="op">()))</span> <span class="op">{</span></span>
<span id="cb332-116"><a href="starfield.html#cb332-116"></a>        <span class="cf">for</span> <span class="op">(</span><span class="kw">auto</span> <span class="at">const</span> index <span class="op">:</span> iter<span class="op">::</span>range<span class="op">(</span>comboItems<span class="op">.</span>size<span class="op">()))</span> <span class="op">{</span></span>
<span id="cb332-117"><a href="starfield.html#cb332-117"></a>          <span class="kw">auto</span> <span class="at">const</span> isSelected<span class="op">{</span>currentIndex <span class="op">==</span> index<span class="op">};</span></span>
<span id="cb332-118"><a href="starfield.html#cb332-118"></a>          <span class="cf">if</span> <span class="op">(</span>ImGui<span class="op">::</span>Selectable<span class="op">(</span>comboItems<span class="op">.</span>at<span class="op">(</span>index<span class="op">).</span>c_str<span class="op">(),</span> isSelected<span class="op">))</span></span>
<span id="cb332-119"><a href="starfield.html#cb332-119"></a>            currentIndex <span class="op">=</span> index<span class="op">;</span></span>
<span id="cb332-120"><a href="starfield.html#cb332-120"></a>          <span class="cf">if</span> <span class="op">(</span>isSelected<span class="op">)</span></span>
<span id="cb332-121"><a href="starfield.html#cb332-121"></a>            ImGui<span class="op">::</span>SetItemDefaultFocus<span class="op">();</span></span>
<span id="cb332-122"><a href="starfield.html#cb332-122"></a>        <span class="op">}</span></span>
<span id="cb332-123"><a href="starfield.html#cb332-123"></a>        ImGui<span class="op">::</span>EndCombo<span class="op">();</span></span>
<span id="cb332-124"><a href="starfield.html#cb332-124"></a>      <span class="op">}</span></span>
<span id="cb332-125"><a href="starfield.html#cb332-125"></a>      ImGui<span class="op">::</span>PopItemWidth<span class="op">();</span></span>
<span id="cb332-126"><a href="starfield.html#cb332-126"></a></span>
<span id="cb332-127"><a href="starfield.html#cb332-127"></a>      ImGui<span class="op">::</span>PushItemWidth<span class="op">(</span><span class="dv">170</span><span class="op">);</span></span>
<span id="cb332-128"><a href="starfield.html#cb332-128"></a>      <span class="kw">auto</span> <span class="at">const</span> aspect<span class="op">{</span>gsl<span class="op">::</span>narrow<span class="op">&lt;</span><span class="dt">float</span><span class="op">&gt;(</span><span class="va">m_viewportSize</span><span class="op">.</span>x<span class="op">)</span> <span class="op">/</span></span>
<span id="cb332-129"><a href="starfield.html#cb332-129"></a>                        gsl<span class="op">::</span>narrow<span class="op">&lt;</span><span class="dt">float</span><span class="op">&gt;(</span><span class="va">m_viewportSize</span><span class="op">.</span>y<span class="op">)};</span></span>
<span id="cb332-130"><a href="starfield.html#cb332-130"></a>      <span class="cf">if</span> <span class="op">(</span>currentIndex <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb332-131"><a href="starfield.html#cb332-131"></a>        <span class="va">m_projMatrix</span> <span class="op">=</span></span>
<span id="cb332-132"><a href="starfield.html#cb332-132"></a>            glm<span class="op">::</span>perspective<span class="op">(</span>glm<span class="op">::</span>radians<span class="op">(</span><span class="va">m_FOV</span><span class="op">),</span> aspect<span class="op">,</span> <span class="fl">0.01</span><span class="bu">f</span><span class="op">,</span> <span class="fl">100.0</span><span class="bu">f</span><span class="op">);</span></span>
<span id="cb332-133"><a href="starfield.html#cb332-133"></a></span>
<span id="cb332-134"><a href="starfield.html#cb332-134"></a>        ImGui<span class="op">::</span>SliderFloat<span class="op">(</span><span class="st">&quot;FOV&quot;</span><span class="op">,</span> <span class="op">&amp;</span><span class="va">m_FOV</span><span class="op">,</span> <span class="fl">5.0</span><span class="bu">f</span><span class="op">,</span> <span class="fl">179.0</span><span class="bu">f</span><span class="op">,</span> <span class="st">&quot;</span><span class="sc">%.0f</span><span class="st"> degrees&quot;</span><span class="op">);</span></span>
<span id="cb332-135"><a href="starfield.html#cb332-135"></a>      <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb332-136"><a href="starfield.html#cb332-136"></a>        <span class="va">m_projMatrix</span> <span class="op">=</span> glm<span class="op">::</span>ortho<span class="op">(-</span><span class="fl">20.0</span><span class="bu">f</span> <span class="op">*</span> aspect<span class="op">,</span> <span class="fl">20.0</span><span class="bu">f</span> <span class="op">*</span> aspect<span class="op">,</span> <span class="op">-</span><span class="fl">20.0</span><span class="bu">f</span><span class="op">,</span></span>
<span id="cb332-137"><a href="starfield.html#cb332-137"></a>                                  <span class="fl">20.0</span><span class="bu">f</span><span class="op">,</span> <span class="fl">0.01</span><span class="bu">f</span><span class="op">,</span> <span class="fl">100.0</span><span class="bu">f</span><span class="op">);</span></span>
<span id="cb332-138"><a href="starfield.html#cb332-138"></a>      <span class="op">}</span></span>
<span id="cb332-139"><a href="starfield.html#cb332-139"></a>      ImGui<span class="op">::</span>PopItemWidth<span class="op">();</span></span>
<span id="cb332-140"><a href="starfield.html#cb332-140"></a>    <span class="op">}</span></span>
<span id="cb332-141"><a href="starfield.html#cb332-141"></a></span>
<span id="cb332-142"><a href="starfield.html#cb332-142"></a>    ImGui<span class="op">::</span>End<span class="op">();</span></span>
<span id="cb332-143"><a href="starfield.html#cb332-143"></a>  <span class="op">}</span></span>
<span id="cb332-144"><a href="starfield.html#cb332-144"></a><span class="op">}</span></span></code></pre></div>
<p>Esse é o código que define os widgets da ImGui. Assim como fizemos no projeto anterior, a matriz de projeção (<code>m_projMatrix</code>) é definida como projeção perspectiva ou ortográfica de acordo com a seleção do usuário.</p>
<p>O restante de <code>window.cpp</code> ficará assim:</p>
<div class="sourceCode" id="cb333" startFrom="146"><pre class="sourceCode numberSource cpp numberLines"><code class="sourceCode cpp" style="counter-reset: source-line 145;"><span id="cb333-146"><a href="starfield.html#cb333-146"></a><span class="dt">void</span> Window<span class="op">::</span>onResize<span class="op">(</span>glm<span class="op">::</span>ivec2 <span class="at">const</span> <span class="op">&amp;</span>size<span class="op">)</span> <span class="op">{</span> <span class="va">m_viewportSize</span> <span class="op">=</span> size<span class="op">;</span> <span class="op">}</span></span>
<span id="cb333-147"><a href="starfield.html#cb333-147"></a></span>
<span id="cb333-148"><a href="starfield.html#cb333-148"></a><span class="dt">void</span> Window<span class="op">::</span>onDestroy<span class="op">()</span> <span class="op">{</span></span>
<span id="cb333-149"><a href="starfield.html#cb333-149"></a>  <span class="va">m_model</span><span class="op">.</span>destroy<span class="op">();</span></span>
<span id="cb333-150"><a href="starfield.html#cb333-150"></a>  abcg<span class="op">::</span>glDeleteProgram<span class="op">(</span><span class="va">m_program</span><span class="op">);</span></span>
<span id="cb333-151"><a href="starfield.html#cb333-151"></a><span class="op">}</span></span></code></pre></div>
<p>Isso conclui o projeto <code>starfield</code>!</p>
<p>Baixe o código completo usando <a href="https://hbatagelo.github.io/abcgapps/src/starfield.zip">este link</a>.</p>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="viewer1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lighting.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"toc_float": true,
"toolbar": {
"position": "fixed"
},
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
